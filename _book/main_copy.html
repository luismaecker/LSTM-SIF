<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.433">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Forecasting Solar Induced Fluorescence for German Forest after the Heatwave in 2018 using Deep Learning - 1&nbsp; Full Workflow</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./quarto_book/01_load_aux_data.html" rel="next">
<link href="./quarto_book/intro.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script>
<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>


</head>

<body class="nav-sidebar floating nav-fixed">


<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">Forecasting Solar Induced Fluorescence for German Forest after the Heatwave in 2018 using Deep Learning</span>
    </a>
  </div>
        <div class="quarto-navbar-tools ms-auto">
</div>
          <div id="quarto-search" class="" title="Search"></div>
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./main_copy.html"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Full Workflow</span></a></li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation floating overflow-auto">
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Outline</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./quarto_book/intro.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Introduction</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./main_copy.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Full Workflow</span></span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
 <span class="menu-text">Executable scripts</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./quarto_book/01_load_aux_data.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Loading auxillary data</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./quarto_book/02_cube_preprocessing.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Preprocessing ESDC</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./quarto_book/03_base_analysis.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Basic SIF Analysis</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./quarto_book/04_test_modelling.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Prelimnary Modelling</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./quarto_book/05_modelling.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Actual Modelling</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">
 <span class="menu-text">Function scripts</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./quarto_book/config.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Config</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./quarto_book/utils.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Utility functions</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./quarto_book/modelling_functions.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Modelling functions</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./quarto_book/DMP.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Data Summary</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./quarto_book/references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">References</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#setup" id="toc-setup" class="nav-link active" data-scroll-target="#setup"><span class="header-section-number">1.1</span> Setup</a></li>
  <li><a href="#downloading-auxillary-data" id="toc-downloading-auxillary-data" class="nav-link" data-scroll-target="#downloading-auxillary-data"><span class="header-section-number">1.2</span> Downloading auxillary data</a></li>
  <li><a href="#preprocessing-the-cube" id="toc-preprocessing-the-cube" class="nav-link" data-scroll-target="#preprocessing-the-cube"><span class="header-section-number">1.3</span> Preprocessing the cube</a></li>
  <li><a href="#basic-analysis-of-sif-data" id="toc-basic-analysis-of-sif-data" class="nav-link" data-scroll-target="#basic-analysis-of-sif-data"><span class="header-section-number">1.4</span> Basic Analysis of SIF-Data</a></li>
  <li><a href="#prelimnary-modelling" id="toc-prelimnary-modelling" class="nav-link" data-scroll-target="#prelimnary-modelling"><span class="header-section-number">1.5</span> Prelimnary Modelling</a></li>
  <li><a href="#actual-modelling" id="toc-actual-modelling" class="nav-link" data-scroll-target="#actual-modelling"><span class="header-section-number">1.6</span> Actual Modelling</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Full Workflow</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<p>In this we will go through the basic structure of the analysis, as well as the results. The code in this Notebook is only used to compile the results and evaluate them. The code used to generate the results is found in the executable scripts and function scripts following this notebook.</p>
<p>If you want to reproduce the results go to the according <a href="https://git.sc.uni-leipzig.de/ss2024-12-geo-m-ds02/sif-prediction">Gitlab repository</a>.</p>
<section id="setup" class="level2" data-number="1.1">
<h2 data-number="1.1" class="anchored" data-anchor-id="setup"><span class="header-section-number">1.1</span> Setup</h2>
<p>Throughout the scripts some functions and variables are used multiple times. These functions and variables were defined in config.py and utils.py.</p>
<p>From the config script we use the variables, the latitude and longitude range as well as a time range to subset our datacube, containg climatic data and SIF data.</p>
<p>Details: <a href="quarto_book/config.html">Config</a></p>
<p>The two most important functions from utils are:</p>
<ul>
<li><p>create_paths() from utils to create paths necessary throughout the analysis.</p></li>
<li><p>create_subset() to create a subset of the Earth System Data Cube, croped to:</p>
<ul>
<li><p>our AOI, the extent of germany</p></li>
<li><p>the time span where the SIF variable is avaialble</p></li>
<li><p>to the relevant variables</p></li>
</ul></li>
</ul>
<p>Details: <a href="quarto_book/utils.html">Utility functions</a></p>
<div class="cell" data-execution_count="29">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> sys</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> os</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> geopandas <span class="im">as</span> gpd</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> xarray <span class="im">as</span> xr</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> rioxarray <span class="im">as</span> rio</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> json</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> matplotlib.colors <span class="im">import</span> ListedColormap, Normalize</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> mpl_toolkits.axes_grid1.inset_locator <span class="im">import</span> inset_axes</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> matplotlib.gridspec <span class="im">import</span> GridSpec</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Add the parent directory to sys.path</span></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a>sys.path.append(os.path.abspath(os.path.join(<span class="st">'scripts'</span>)))</span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a><span class="co"># from scripts.config import *</span></span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> scripts.utils <span class="im">import</span> create_cube_subset, create_paths</span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> scripts.s03_base_analysis <span class="im">import</span> base_analysis, change_plot, plot_timeseries</span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> scripts.config <span class="im">import</span> variables</span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> scripts.modelling_functions <span class="im">import</span> plot_multiple_results<span class="op">;</span></span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<hr>
<p><strong>Here you can see the subsetted cube</strong></p>
<div class="cell" data-execution_count="30">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>create_cube_subset()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="30">

<div><svg style="position: absolute; width: 0; height: 0; overflow: hidden">
<defs>
<symbol id="icon-database" viewbox="0 0 32 32">
<path d="M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z"></path>
<path d="M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
<path d="M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
</symbol>
<symbol id="icon-file-text2" viewbox="0 0 32 32">
<path d="M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z"></path>
<path d="M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
</symbol>
</defs>
</svg>
<style>/* CSS stylesheet for displaying xarray objects in jupyterlab.
 *
 */

:root {
  --xr-font-color0: var(--jp-content-font-color0, rgba(0, 0, 0, 1));
  --xr-font-color2: var(--jp-content-font-color2, rgba(0, 0, 0, 0.54));
  --xr-font-color3: var(--jp-content-font-color3, rgba(0, 0, 0, 0.38));
  --xr-border-color: var(--jp-border-color2, #e0e0e0);
  --xr-disabled-color: var(--jp-layout-color3, #bdbdbd);
  --xr-background-color: var(--jp-layout-color0, white);
  --xr-background-color-row-even: var(--jp-layout-color1, white);
  --xr-background-color-row-odd: var(--jp-layout-color2, #eeeeee);
}

html[theme=dark],
body[data-theme=dark],
body.vscode-dark {
  --xr-font-color0: rgba(255, 255, 255, 1);
  --xr-font-color2: rgba(255, 255, 255, 0.54);
  --xr-font-color3: rgba(255, 255, 255, 0.38);
  --xr-border-color: #1F1F1F;
  --xr-disabled-color: #515151;
  --xr-background-color: #111111;
  --xr-background-color-row-even: #111111;
  --xr-background-color-row-odd: #313131;
}

.xr-wrap {
  display: block !important;
  min-width: 300px;
  max-width: 700px;
}

.xr-text-repr-fallback {
  /* fallback to plain text repr when CSS is not injected (untrusted notebook) */
  display: none;
}

.xr-header {
  padding-top: 6px;
  padding-bottom: 6px;
  margin-bottom: 4px;
  border-bottom: solid 1px var(--xr-border-color);
}

.xr-header > div,
.xr-header > ul {
  display: inline;
  margin-top: 0;
  margin-bottom: 0;
}

.xr-obj-type,
.xr-array-name {
  margin-left: 2px;
  margin-right: 10px;
}

.xr-obj-type {
  color: var(--xr-font-color2);
}

.xr-sections {
  padding-left: 0 !important;
  display: grid;
  grid-template-columns: 150px auto auto 1fr 20px 20px;
}

.xr-section-item {
  display: contents;
}

.xr-section-item input {
  display: none;
}

.xr-section-item input + label {
  color: var(--xr-disabled-color);
}

.xr-section-item input:enabled + label {
  cursor: pointer;
  color: var(--xr-font-color2);
}

.xr-section-item input:enabled + label:hover {
  color: var(--xr-font-color0);
}

.xr-section-summary {
  grid-column: 1;
  color: var(--xr-font-color2);
  font-weight: 500;
}

.xr-section-summary > span {
  display: inline-block;
  padding-left: 0.5em;
}

.xr-section-summary-in:disabled + label {
  color: var(--xr-font-color2);
}

.xr-section-summary-in + label:before {
  display: inline-block;
  content: '►';
  font-size: 11px;
  width: 15px;
  text-align: center;
}

.xr-section-summary-in:disabled + label:before {
  color: var(--xr-disabled-color);
}

.xr-section-summary-in:checked + label:before {
  content: '▼';
}

.xr-section-summary-in:checked + label > span {
  display: none;
}

.xr-section-summary,
.xr-section-inline-details {
  padding-top: 4px;
  padding-bottom: 4px;
}

.xr-section-inline-details {
  grid-column: 2 / -1;
}

.xr-section-details {
  display: none;
  grid-column: 1 / -1;
  margin-bottom: 5px;
}

.xr-section-summary-in:checked ~ .xr-section-details {
  display: contents;
}

.xr-array-wrap {
  grid-column: 1 / -1;
  display: grid;
  grid-template-columns: 20px auto;
}

.xr-array-wrap > label {
  grid-column: 1;
  vertical-align: top;
}

.xr-preview {
  color: var(--xr-font-color3);
}

.xr-array-preview,
.xr-array-data {
  padding: 0 5px !important;
  grid-column: 2;
}

.xr-array-data,
.xr-array-in:checked ~ .xr-array-preview {
  display: none;
}

.xr-array-in:checked ~ .xr-array-data,
.xr-array-preview {
  display: inline-block;
}

.xr-dim-list {
  display: inline-block !important;
  list-style: none;
  padding: 0 !important;
  margin: 0;
}

.xr-dim-list li {
  display: inline-block;
  padding: 0;
  margin: 0;
}

.xr-dim-list:before {
  content: '(';
}

.xr-dim-list:after {
  content: ')';
}

.xr-dim-list li:not(:last-child):after {
  content: ',';
  padding-right: 5px;
}

.xr-has-index {
  font-weight: bold;
}

.xr-var-list,
.xr-var-item {
  display: contents;
}

.xr-var-item > div,
.xr-var-item label,
.xr-var-item > .xr-var-name span {
  background-color: var(--xr-background-color-row-even);
  margin-bottom: 0;
}

.xr-var-item > .xr-var-name:hover span {
  padding-right: 5px;
}

.xr-var-list > li:nth-child(odd) > div,
.xr-var-list > li:nth-child(odd) > label,
.xr-var-list > li:nth-child(odd) > .xr-var-name span {
  background-color: var(--xr-background-color-row-odd);
}

.xr-var-name {
  grid-column: 1;
}

.xr-var-dims {
  grid-column: 2;
}

.xr-var-dtype {
  grid-column: 3;
  text-align: right;
  color: var(--xr-font-color2);
}

.xr-var-preview {
  grid-column: 4;
}

.xr-index-preview {
  grid-column: 2 / 5;
  color: var(--xr-font-color2);
}

.xr-var-name,
.xr-var-dims,
.xr-var-dtype,
.xr-preview,
.xr-attrs dt {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  padding-right: 10px;
}

.xr-var-name:hover,
.xr-var-dims:hover,
.xr-var-dtype:hover,
.xr-attrs dt:hover {
  overflow: visible;
  width: auto;
  z-index: 1;
}

.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  display: none;
  background-color: var(--xr-background-color) !important;
  padding-bottom: 5px !important;
}

.xr-var-attrs-in:checked ~ .xr-var-attrs,
.xr-var-data-in:checked ~ .xr-var-data,
.xr-index-data-in:checked ~ .xr-index-data {
  display: block;
}

.xr-var-data > table {
  float: right;
}

.xr-var-name span,
.xr-var-data,
.xr-index-name div,
.xr-index-data,
.xr-attrs {
  padding-left: 25px !important;
}

.xr-attrs,
.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  grid-column: 1 / -1;
}

dl.xr-attrs {
  padding: 0;
  margin: 0;
  display: grid;
  grid-template-columns: 125px auto;
}

.xr-attrs dt,
.xr-attrs dd {
  padding: 0;
  margin: 0;
  float: left;
  padding-right: 10px;
  width: auto;
}

.xr-attrs dt {
  font-weight: normal;
  grid-column: 1;
}

.xr-attrs dt:hover span {
  display: inline-block;
  background: var(--xr-background-color);
  padding-right: 10px;
}

.xr-attrs dd {
  grid-column: 2;
  white-space: pre-wrap;
  word-break: break-all;
}

.xr-icon-database,
.xr-icon-file-text2,
.xr-no-icon {
  display: inline-block;
  vertical-align: middle;
  width: 1em;
  height: 1.5em !important;
  stroke-width: 0;
  stroke: currentColor;
  fill: currentColor;
}
</style><pre class="xr-text-repr-fallback">&lt;xarray.Dataset&gt; Size: 30MB
Dimensions:                 (time: 920, lat: 31, lon: 37)
Coordinates:
  * lat                     (lat) float64 248B 47.38 47.62 47.88 ... 54.62 54.88
  * lon                     (lon) float64 296B 5.875 6.125 6.375 ... 14.62 14.88
  * time                    (time) datetime64[ns] 7kB 2002-01-05 ... 2021-12-31
    spatial_ref             int64 8B 0
Data variables:
    sif_gosif               (time, lat, lon) float32 4MB dask.array&lt;chunksize=(222, 31, 25), meta=np.ndarray&gt;
    evaporation_era5        (time, lat, lon) float32 4MB dask.array&lt;chunksize=(222, 31, 25), meta=np.ndarray&gt;
    precipitation_era5      (time, lat, lon) float32 4MB dask.array&lt;chunksize=(222, 31, 25), meta=np.ndarray&gt;
    radiation_era5          (time, lat, lon) float32 4MB dask.array&lt;chunksize=(222, 31, 25), meta=np.ndarray&gt;
    air_temperature_2m      (time, lat, lon) float32 4MB dask.array&lt;chunksize=(222, 31, 25), meta=np.ndarray&gt;
    max_air_temperature_2m  (time, lat, lon) float32 4MB dask.array&lt;chunksize=(222, 31, 25), meta=np.ndarray&gt;
    min_air_temperature_2m  (time, lat, lon) float32 4MB dask.array&lt;chunksize=(222, 31, 25), meta=np.ndarray&gt;
Attributes: (12/23)
    Conventions:                CF-1.9
    acknowledgment:             All ESDC data providers are acknowledged insi...
    contributor_name:           ['University of Leipzig', 'Max Planck Institu...
    contributor_url:            ['https://www.uni-leipzig.de/', 'https://www....
    creator_name:               ['University of Leipzig', 'Brockmann Consult ...
    creator_url:                ['https://www.uni-leipzig.de/', 'https://www....
    ...                         ...
    publisher_url:              https://www.earthsystemdatalab.net/
    time_coverage_end:          2021-12-31T00:00:00.000000000
    time_coverage_start:        1979-01-05T00:00:00.000000000
    time_period:                8D
    time_period_reported_day:   5.0
    title:                      Earth System Data Cube (ESDC) v3.0.1</pre><div class="xr-wrap" style="display:none"><div class="xr-header"><div class="xr-obj-type">xarray.Dataset</div></div><ul class="xr-sections"><li class="xr-section-item"><input id="section-220ff761-a7ea-4110-9bd5-3a8ff02de218" class="xr-section-summary-in" type="checkbox" disabled=""><label for="section-220ff761-a7ea-4110-9bd5-3a8ff02de218" class="xr-section-summary" title="Expand/collapse section">Dimensions:</label><div class="xr-section-inline-details"><ul class="xr-dim-list"><li><span class="xr-has-index">time</span>: 920</li><li><span class="xr-has-index">lat</span>: 31</li><li><span class="xr-has-index">lon</span>: 37</li></ul></div><div class="xr-section-details"></div></li><li class="xr-section-item"><input id="section-b9f603a3-8d56-4e9a-b795-ee3bdd656d29" class="xr-section-summary-in" type="checkbox" checked=""><label for="section-b9f603a3-8d56-4e9a-b795-ee3bdd656d29" class="xr-section-summary">Coordinates: <span>(4)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><ul class="xr-var-list"><li class="xr-var-item"><div class="xr-var-name"><span class="xr-has-index">lat</span></div><div class="xr-var-dims">(lat)</div><div class="xr-var-dtype">float64</div><div class="xr-var-preview xr-preview">47.38 47.62 47.88 ... 54.62 54.88</div><input id="attrs-373a85f1-1785-4757-946c-054622687053" class="xr-var-attrs-in" type="checkbox"><label for="attrs-373a85f1-1785-4757-946c-054622687053" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-77185860-58a2-42f9-bba1-f7bc524b1c3c" class="xr-var-data-in" type="checkbox"><label for="data-77185860-58a2-42f9-bba1-f7bc524b1c3c" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"><dt><span>long_name :</span></dt><dd>latitude</dd><dt><span>standard_name :</span></dt><dd>latitude</dd><dt><span>units :</span></dt><dd>degrees_north</dd></dl></div><div class="xr-var-data"><pre>array([47.375, 47.625, 47.875, 48.125, 48.375, 48.625, 48.875, 49.125, 49.375,
       49.625, 49.875, 50.125, 50.375, 50.625, 50.875, 51.125, 51.375, 51.625,
       51.875, 52.125, 52.375, 52.625, 52.875, 53.125, 53.375, 53.625, 53.875,
       54.125, 54.375, 54.625, 54.875])</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span class="xr-has-index">lon</span></div><div class="xr-var-dims">(lon)</div><div class="xr-var-dtype">float64</div><div class="xr-var-preview xr-preview">5.875 6.125 6.375 ... 14.62 14.88</div><input id="attrs-2d32c423-ff93-49bb-86a6-73ee4fef39e9" class="xr-var-attrs-in" type="checkbox"><label for="attrs-2d32c423-ff93-49bb-86a6-73ee4fef39e9" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-a8bc8655-d112-46d5-a1cd-c033408c3cfe" class="xr-var-data-in" type="checkbox"><label for="data-a8bc8655-d112-46d5-a1cd-c033408c3cfe" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"><dt><span>long_name :</span></dt><dd>longitude</dd><dt><span>standard_name :</span></dt><dd>longitude</dd><dt><span>units :</span></dt><dd>degrees_east</dd></dl></div><div class="xr-var-data"><pre>array([ 5.875,  6.125,  6.375,  6.625,  6.875,  7.125,  7.375,  7.625,  7.875,
        8.125,  8.375,  8.625,  8.875,  9.125,  9.375,  9.625,  9.875, 10.125,
       10.375, 10.625, 10.875, 11.125, 11.375, 11.625, 11.875, 12.125, 12.375,
       12.625, 12.875, 13.125, 13.375, 13.625, 13.875, 14.125, 14.375, 14.625,
       14.875])</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span class="xr-has-index">time</span></div><div class="xr-var-dims">(time)</div><div class="xr-var-dtype">datetime64[ns]</div><div class="xr-var-preview xr-preview">2002-01-05 ... 2021-12-31</div><input id="attrs-d23491c3-bcd8-4c89-8ecc-bbb63dffd4a9" class="xr-var-attrs-in" type="checkbox"><label for="attrs-d23491c3-bcd8-4c89-8ecc-bbb63dffd4a9" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-55fc5c1b-6aad-4270-8707-6868c2f2c043" class="xr-var-data-in" type="checkbox"><label for="data-55fc5c1b-6aad-4270-8707-6868c2f2c043" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"><dt><span>long_name :</span></dt><dd>time</dd><dt><span>standard_name :</span></dt><dd>time</dd></dl></div><div class="xr-var-data"><pre>array(['2002-01-05T00:00:00.000000000', '2002-01-13T00:00:00.000000000',
       '2002-01-21T00:00:00.000000000', ..., '2021-12-15T00:00:00.000000000',
       '2021-12-23T00:00:00.000000000', '2021-12-31T00:00:00.000000000'],
      dtype='datetime64[ns]')</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span>spatial_ref</span></div><div class="xr-var-dims">()</div><div class="xr-var-dtype">int64</div><div class="xr-var-preview xr-preview">0</div><input id="attrs-70030463-2cf6-4f6e-8257-e05cd550c948" class="xr-var-attrs-in" type="checkbox"><label for="attrs-70030463-2cf6-4f6e-8257-e05cd550c948" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-7533a90e-a2cf-4337-a73b-5e40ac7d46a8" class="xr-var-data-in" type="checkbox"><label for="data-7533a90e-a2cf-4337-a73b-5e40ac7d46a8" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"><dt><span>crs_wkt :</span></dt><dd>GEOGCS["WGS 84",DATUM["WGS_1984",SPHEROID["WGS 84",6378137,298.257223563,AUTHORITY["EPSG","7030"]],AUTHORITY["EPSG","6326"]],PRIMEM["Greenwich",0,AUTHORITY["EPSG","8901"]],UNIT["degree",0.0174532925199433,AUTHORITY["EPSG","9122"]],AXIS["Latitude",NORTH],AXIS["Longitude",EAST],AUTHORITY["EPSG","4326"]]</dd><dt><span>semi_major_axis :</span></dt><dd>6378137.0</dd><dt><span>semi_minor_axis :</span></dt><dd>6356752.314245179</dd><dt><span>inverse_flattening :</span></dt><dd>298.257223563</dd><dt><span>reference_ellipsoid_name :</span></dt><dd>WGS 84</dd><dt><span>longitude_of_prime_meridian :</span></dt><dd>0.0</dd><dt><span>prime_meridian_name :</span></dt><dd>Greenwich</dd><dt><span>geographic_crs_name :</span></dt><dd>WGS 84</dd><dt><span>horizontal_datum_name :</span></dt><dd>World Geodetic System 1984</dd><dt><span>grid_mapping_name :</span></dt><dd>latitude_longitude</dd><dt><span>spatial_ref :</span></dt><dd>GEOGCS["WGS 84",DATUM["WGS_1984",SPHEROID["WGS 84",6378137,298.257223563,AUTHORITY["EPSG","7030"]],AUTHORITY["EPSG","6326"]],PRIMEM["Greenwich",0,AUTHORITY["EPSG","8901"]],UNIT["degree",0.0174532925199433,AUTHORITY["EPSG","9122"]],AXIS["Latitude",NORTH],AXIS["Longitude",EAST],AUTHORITY["EPSG","4326"]]</dd></dl></div><div class="xr-var-data"><pre>array(0)</pre></div></li></ul></div></li><li class="xr-section-item"><input id="section-1a612127-7972-484d-a173-ede8a1b7839d" class="xr-section-summary-in" type="checkbox" checked=""><label for="section-1a612127-7972-484d-a173-ede8a1b7839d" class="xr-section-summary">Data variables: <span>(7)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><ul class="xr-var-list"><li class="xr-var-item"><div class="xr-var-name"><span>sif_gosif</span></div><div class="xr-var-dims">(time, lat, lon)</div><div class="xr-var-dtype">float32</div><div class="xr-var-preview xr-preview">dask.array&lt;chunksize=(222, 31, 25), meta=np.ndarray&gt;</div><input id="attrs-511d91c9-2dee-40ad-aadc-dfe806306164" class="xr-var-attrs-in" type="checkbox"><label for="attrs-511d91c9-2dee-40ad-aadc-dfe806306164" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-03e99d17-3681-4512-b67e-87fae82bb68f" class="xr-var-data-in" type="checkbox"><label for="data-03e99d17-3681-4512-b67e-87fae82bb68f" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"><dt><span>acknowledgment :</span></dt><dd>https://doi.org/10.3390/rs11050517</dd><dt><span>date_modified :</span></dt><dd>2022-10-11 22:20:05.841847</dd><dt><span>description :</span></dt><dd>GOSIF Solar-Induced Chlorophyll Fluorescence Derived from OCO-2, MODIS, and Reanalysis Data</dd><dt><span>geospatial_lat_max :</span></dt><dd>89.87499999999999</dd><dt><span>geospatial_lat_min :</span></dt><dd>-89.87500000000001</dd><dt><span>geospatial_lat_resolution :</span></dt><dd>0.25</dd><dt><span>geospatial_lon_max :</span></dt><dd>179.87500000000003</dd><dt><span>geospatial_lon_min :</span></dt><dd>-179.87499999999997</dd><dt><span>geospatial_lon_resolution :</span></dt><dd>0.25</dd><dt><span>license :</span></dt><dd>Terms and conditions of the DeepESDL data distribution</dd><dt><span>long_name :</span></dt><dd>Sun-Induced Chlorophyll Fluorescence at 757 nm</dd><dt><span>original_add_offset :</span></dt><dd>0.0</dd><dt><span>original_name :</span></dt><dd>sif</dd><dt><span>original_scale_factor :</span></dt><dd>0.0001</dd><dt><span>processing_steps :</span></dt><dd>['Merging tif files', 'Converting water bodies and snow covered areas to NaN', 'Applying original scale factor', 'Downsampling to 0.25 deg with mean']</dd><dt><span>project :</span></dt><dd>DeepESDL</dd><dt><span>references :</span></dt><dd>['https://doi.org/10.3390/rs11050517']</dd><dt><span>reported_day :</span></dt><dd>5.0</dd><dt><span>source :</span></dt><dd>['https://globalecology.unh.edu/data.html']</dd><dt><span>standard_name :</span></dt><dd>sif</dd><dt><span>temporal_resolution :</span></dt><dd>8D</dd><dt><span>time_coverage_end :</span></dt><dd>2021-12-31T00:00:00.000000000</dd><dt><span>time_coverage_start :</span></dt><dd>2000-03-01T00:00:00.000000000</dd><dt><span>time_period :</span></dt><dd>8D</dd><dt><span>units :</span></dt><dd>W m^-2 sr^-1 um^-1</dd></dl></div><div class="xr-var-data">
<table data-quarto-postprocess="true" class="table table-sm table-striped small">
<colgroup>
<col style="width: 50%">
<col style="width: 50%">
</colgroup>
<tbody>
<tr class="odd">
<td><table data-quarto-postprocess="true" class="table table-sm table-striped small">
<thead>
<tr class="header">
<th></th>
<th data-quarto-table-cell-role="th">Array</th>
<th data-quarto-table-cell-role="th">Chunk</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">Bytes</td>
<td>4.03 MiB</td>
<td>775.00 kiB</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Shape</td>
<td>(920, 31, 37)</td>
<td>(256, 31, 25)</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Dask graph</td>
<td colspan="2">8 chunks in 4 graph layers</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Data type</td>
<td colspan="2">float32 numpy.ndarray</td>
</tr>
</tbody>
</table></td>
<td><img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYzIiBoZWlnaHQ9IjE1MiIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxIj4KCiAgPCEtLSBIb3Jpem9udGFsIGxpbmVzIC0tPgogIDxsaW5lIHgxPSIxMCIgeTE9IjAiIHgyPSI4MCIgeTI9IjcwIiBzdHlsZT0ic3Ryb2tlLXdpZHRoOjIiPjwvbGluZT4KICA8bGluZSB4MT0iMTAiIHkxPSIzMiIgeDI9IjgwIiB5Mj0iMTAyIiBzdHlsZT0ic3Ryb2tlLXdpZHRoOjIiPjwvbGluZT4KCiAgPCEtLSBWZXJ0aWNhbCBsaW5lcyAtLT4KICA8bGluZSB4MT0iMTAiIHkxPSIwIiB4Mj0iMTAiIHkyPSIzMiIgc3R5bGU9InN0cm9rZS13aWR0aDoyIj48L2xpbmU+CiAgPGxpbmUgeDE9IjI3IiB5MT0iMTciIHgyPSIyNyIgeTI9IjQ5Ij48L2xpbmU+CiAgPGxpbmUgeDE9IjQ2IiB5MT0iMzYiIHgyPSI0NiIgeTI9IjY4Ij48L2xpbmU+CiAgPGxpbmUgeDE9IjY2IiB5MT0iNTYiIHgyPSI2NiIgeTI9Ijg4Ij48L2xpbmU+CiAgPGxpbmUgeDE9IjgwIiB5MT0iNzAiIHgyPSI4MCIgeTI9IjEwMiIgc3R5bGU9InN0cm9rZS13aWR0aDoyIj48L2xpbmU+CgogIDwhLS0gQ29sb3JlZCBSZWN0YW5nbGUgLS0+CiAgPHBvbHlnb24gcG9pbnRzPSIxMC4wLDAuMCA4MC41ODgyMzUyOTQxMTc2NSw3MC41ODgyMzUyOTQxMTc2NSA4MC41ODgyMzUyOTQxMTc2NSwxMDIuNjc3OTkwNDI5NjgyIDEwLjAsMzIuMDg5NzU1MTM1NTY0MzQ2IiBzdHlsZT0iZmlsbDojRUNCMTcyQTA7c3Ryb2tlLXdpZHRoOjAiPjwvcG9seWdvbj4KCiAgPCEtLSBIb3Jpem9udGFsIGxpbmVzIC0tPgogIDxsaW5lIHgxPSIxMCIgeTE9IjAiIHgyPSI0MyIgeTI9IjAiIHN0eWxlPSJzdHJva2Utd2lkdGg6MiI+PC9saW5lPgogIDxsaW5lIHgxPSIyNyIgeTE9IjE3IiB4Mj0iNjAiIHkyPSIxNyI+PC9saW5lPgogIDxsaW5lIHgxPSI0NiIgeTE9IjM2IiB4Mj0iNzkiIHkyPSIzNiI+PC9saW5lPgogIDxsaW5lIHgxPSI2NiIgeTE9IjU2IiB4Mj0iOTkiIHkyPSI1NiI+PC9saW5lPgogIDxsaW5lIHgxPSI4MCIgeTE9IjcwIiB4Mj0iMTEzIiB5Mj0iNzAiIHN0eWxlPSJzdHJva2Utd2lkdGg6MiI+PC9saW5lPgoKICA8IS0tIFZlcnRpY2FsIGxpbmVzIC0tPgogIDxsaW5lIHgxPSIxMCIgeTE9IjAiIHgyPSI4MCIgeTI9IjcwIiBzdHlsZT0ic3Ryb2tlLXdpZHRoOjIiPjwvbGluZT4KICA8bGluZSB4MT0iMzIiIHkxPSIwIiB4Mj0iMTAyIiB5Mj0iNzAiPjwvbGluZT4KICA8bGluZSB4MT0iNDMiIHkxPSIwIiB4Mj0iMTEzIiB5Mj0iNzAiIHN0eWxlPSJzdHJva2Utd2lkdGg6MiI+PC9saW5lPgoKICA8IS0tIENvbG9yZWQgUmVjdGFuZ2xlIC0tPgogIDxwb2x5Z29uIHBvaW50cz0iMTAuMCwwLjAgNDMuMTY3MDI5MDQwNTE4OTEsMC4wIDExMy43NTUyNjQzMzQ2MzY1Niw3MC41ODgyMzUyOTQxMTc2NSA4MC41ODgyMzUyOTQxMTc2NSw3MC41ODgyMzUyOTQxMTc2NSIgc3R5bGU9ImZpbGw6I0VDQjE3MkEwO3N0cm9rZS13aWR0aDowIj48L3BvbHlnb24+CgogIDwhLS0gSG9yaXpvbnRhbCBsaW5lcyAtLT4KICA8bGluZSB4MT0iODAiIHkxPSI3MCIgeDI9IjExMyIgeTI9IjcwIiBzdHlsZT0ic3Ryb2tlLXdpZHRoOjIiPjwvbGluZT4KICA8bGluZSB4MT0iODAiIHkxPSIxMDIiIHgyPSIxMTMiIHkyPSIxMDIiIHN0eWxlPSJzdHJva2Utd2lkdGg6MiI+PC9saW5lPgoKICA8IS0tIFZlcnRpY2FsIGxpbmVzIC0tPgogIDxsaW5lIHgxPSI4MCIgeTE9IjcwIiB4Mj0iODAiIHkyPSIxMDIiIHN0eWxlPSJzdHJva2Utd2lkdGg6MiI+PC9saW5lPgogIDxsaW5lIHgxPSIxMDIiIHkxPSI3MCIgeDI9IjEwMiIgeTI9IjEwMiI+PC9saW5lPgogIDxsaW5lIHgxPSIxMTMiIHkxPSI3MCIgeDI9IjExMyIgeTI9IjEwMiIgc3R5bGU9InN0cm9rZS13aWR0aDoyIj48L2xpbmU+CgogIDwhLS0gQ29sb3JlZCBSZWN0YW5nbGUgLS0+CiAgPHBvbHlnb24gcG9pbnRzPSI4MC41ODgyMzUyOTQxMTc2NSw3MC41ODgyMzUyOTQxMTc2NSAxMTMuNzU1MjY0MzM0NjM2NTYsNzAuNTg4MjM1Mjk0MTE3NjUgMTEzLjc1NTI2NDMzNDYzNjU2LDEwMi42Nzc5OTA0Mjk2ODIgODAuNTg4MjM1Mjk0MTE3NjUsMTAyLjY3Nzk5MDQyOTY4MiIgc3R5bGU9ImZpbGw6I0VDQjE3MkEwO3N0cm9rZS13aWR0aDowIj48L3BvbHlnb24+CgogIDwhLS0gVGV4dCAtLT4KICA8dGV4dCB4PSI5Ny4xNzE3NTAiIHk9IjEyMi42Nzc5OTAiIGZvbnQtc2l6ZT0iMS4wcmVtIiBmb250LXdlaWdodD0iMTAwIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIj4zNzwvdGV4dD4KICA8dGV4dCB4PSIxMzMuNzU1MjY0IiB5PSI4Ni42MzMxMTMiIGZvbnQtc2l6ZT0iMS4wcmVtIiBmb250LXdlaWdodD0iMTAwIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiB0cmFuc2Zvcm09InJvdGF0ZSgwLDEzMy43NTUyNjQsODYuNjMzMTEzKSI+MzE8L3RleHQ+CiAgPHRleHQgeD0iMzUuMjk0MTE4IiB5PSI4Ny4zODM4NzMiIGZvbnQtc2l6ZT0iMS4wcmVtIiBmb250LXdlaWdodD0iMTAwIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiB0cmFuc2Zvcm09InJvdGF0ZSg0NSwzNS4yOTQxMTgsODcuMzgzODczKSI+OTIwPC90ZXh0Pgo8L3N2Zz4=" class="img-fluid"></td>
</tr>
</tbody>
</table>
<div class="xr-var-name">
<span>evaporation_era5</span>
</div>
<div class="xr-var-dims">
(time, lat, lon)
</div>
<div class="xr-var-dtype">
float32
</div>
<div class="xr-var-preview xr-preview">
dask.array&lt;chunksize=(222, 31, 25), meta=np.ndarray&gt;
</div>
<img src="data:image/svg+xml;base64,PHN2ZyBjbGFzcz0iaWNvbiB4ci1pY29uLWZpbGUtdGV4dDIiPjx1c2UgeGxpbms6aHJlZj0iI2ljb24tZmlsZS10ZXh0MiI+PC91c2U+PC9zdmc+" class="icon xr-icon-file-text2 img-fluid"><img src="data:image/svg+xml;base64,PHN2ZyBjbGFzcz0iaWNvbiB4ci1pY29uLWRhdGFiYXNlIj48dXNlIHhsaW5rOmhyZWY9IiNpY29uLWRhdGFiYXNlIj48L3VzZT48L3N2Zz4=" class="icon xr-icon-database img-fluid">
<div class="xr-var-attrs">
<dl>
<dt><span>acknowledgment :</span></dt>
<dd>
ERA5 hourly data on single levels from 1959 to present
</dd>
<dt><span>date_modified :</span></dt>
<dd>
2022-11-04 15:41:36.233472
</dd>
<dt><span>description :</span></dt>
<dd>
ERA5 Reanalysis Products
</dd>
<dt><span>geospatial_lat_max :</span></dt>
<dd>
89.875
</dd>
<dt><span>geospatial_lat_min :</span></dt>
<dd>
-89.875
</dd>
<dt><span>geospatial_lat_resolution :</span></dt>
<dd>
0.25
</dd>
<dt><span>geospatial_lon_max :</span></dt>
<dd>
179.875
</dd>
<dt><span>geospatial_lon_min :</span></dt>
<dd>
-179.875
</dd>
<dt><span>geospatial_lon_resolution :</span></dt>
<dd>
0.25
</dd>
<dt><span>license :</span></dt>
<dd>
Terms and conditions of the DeepESDL data distribution
</dd>
<dt><span>long_name :</span></dt>
<dd>
Evaporation
</dd>
<dt><span>original_add_offset :</span></dt>
<dd>
0.0
</dd>
<dt><span>original_name :</span></dt>
<dd>
e
</dd>
<dt><span>original_scale_factor :</span></dt>
<dd>
1.0
</dd>
<dt><span>processing_steps :</span></dt>
<dd>
['Merging nc files', 'Resampling by daily sum', 'Converting to mm from m', 'Resampling by 8-day mean', 'Resampling to 0.25 degrees using bilinear interpolation']
</dd>
<dt><span>project :</span></dt>
<dd>
DeepESDL
</dd>
<dt><span>references :</span></dt>
<dd>
['https://confluence.ecmwf.int/display/CKB/ERA5%3A+data+documentation']
</dd>
<dt><span>reported_day :</span></dt>
<dd>
5.0
</dd>
<dt><span>source :</span></dt>
<dd>
['https://cds.climate.copernicus.eu/cdsapp#!/dataset/reanalysis-era5-single-levels']
</dd>
<dt><span>standard_name :</span></dt>
<dd>
lwe_thickness_of_water_evaporation_amount
</dd>
<dt><span>temporal_resolution :</span></dt>
<dd>
8D
</dd>
<dt><span>time_coverage_end :</span></dt>
<dd>
2021-12-27T00:00:00.000000000
</dd>
<dt><span>time_coverage_start :</span></dt>
<dd>
1979-01-01T00:00:00.000000000
</dd>
<dt><span>time_period :</span></dt>
<dd>
8D
</dd>
<dt><span>units :</span></dt>
<dd>
mm d^-1
</dd>
</dl>
</div>
<div class="xr-var-data">
<table data-quarto-postprocess="true" class="table table-sm table-striped small">
<colgroup>
<col style="width: 50%">
<col style="width: 50%">
</colgroup>
<tbody>
<tr class="odd">
<td><table data-quarto-postprocess="true" class="table table-sm table-striped small">
<thead>
<tr class="header">
<th></th>
<th data-quarto-table-cell-role="th">Array</th>
<th data-quarto-table-cell-role="th">Chunk</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">Bytes</td>
<td>4.03 MiB</td>
<td>775.00 kiB</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Shape</td>
<td>(920, 31, 37)</td>
<td>(256, 31, 25)</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Dask graph</td>
<td colspan="2">8 chunks in 4 graph layers</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Data type</td>
<td colspan="2">float32 numpy.ndarray</td>
</tr>
</tbody>
</table></td>
<td><img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYzIiBoZWlnaHQ9IjE1MiIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxIj4KCiAgPCEtLSBIb3Jpem9udGFsIGxpbmVzIC0tPgogIDxsaW5lIHgxPSIxMCIgeTE9IjAiIHgyPSI4MCIgeTI9IjcwIiBzdHlsZT0ic3Ryb2tlLXdpZHRoOjIiPjwvbGluZT4KICA8bGluZSB4MT0iMTAiIHkxPSIzMiIgeDI9IjgwIiB5Mj0iMTAyIiBzdHlsZT0ic3Ryb2tlLXdpZHRoOjIiPjwvbGluZT4KCiAgPCEtLSBWZXJ0aWNhbCBsaW5lcyAtLT4KICA8bGluZSB4MT0iMTAiIHkxPSIwIiB4Mj0iMTAiIHkyPSIzMiIgc3R5bGU9InN0cm9rZS13aWR0aDoyIj48L2xpbmU+CiAgPGxpbmUgeDE9IjI3IiB5MT0iMTciIHgyPSIyNyIgeTI9IjQ5Ij48L2xpbmU+CiAgPGxpbmUgeDE9IjQ2IiB5MT0iMzYiIHgyPSI0NiIgeTI9IjY4Ij48L2xpbmU+CiAgPGxpbmUgeDE9IjY2IiB5MT0iNTYiIHgyPSI2NiIgeTI9Ijg4Ij48L2xpbmU+CiAgPGxpbmUgeDE9IjgwIiB5MT0iNzAiIHgyPSI4MCIgeTI9IjEwMiIgc3R5bGU9InN0cm9rZS13aWR0aDoyIj48L2xpbmU+CgogIDwhLS0gQ29sb3JlZCBSZWN0YW5nbGUgLS0+CiAgPHBvbHlnb24gcG9pbnRzPSIxMC4wLDAuMCA4MC41ODgyMzUyOTQxMTc2NSw3MC41ODgyMzUyOTQxMTc2NSA4MC41ODgyMzUyOTQxMTc2NSwxMDIuNjc3OTkwNDI5NjgyIDEwLjAsMzIuMDg5NzU1MTM1NTY0MzQ2IiBzdHlsZT0iZmlsbDojRUNCMTcyQTA7c3Ryb2tlLXdpZHRoOjAiPjwvcG9seWdvbj4KCiAgPCEtLSBIb3Jpem9udGFsIGxpbmVzIC0tPgogIDxsaW5lIHgxPSIxMCIgeTE9IjAiIHgyPSI0MyIgeTI9IjAiIHN0eWxlPSJzdHJva2Utd2lkdGg6MiI+PC9saW5lPgogIDxsaW5lIHgxPSIyNyIgeTE9IjE3IiB4Mj0iNjAiIHkyPSIxNyI+PC9saW5lPgogIDxsaW5lIHgxPSI0NiIgeTE9IjM2IiB4Mj0iNzkiIHkyPSIzNiI+PC9saW5lPgogIDxsaW5lIHgxPSI2NiIgeTE9IjU2IiB4Mj0iOTkiIHkyPSI1NiI+PC9saW5lPgogIDxsaW5lIHgxPSI4MCIgeTE9IjcwIiB4Mj0iMTEzIiB5Mj0iNzAiIHN0eWxlPSJzdHJva2Utd2lkdGg6MiI+PC9saW5lPgoKICA8IS0tIFZlcnRpY2FsIGxpbmVzIC0tPgogIDxsaW5lIHgxPSIxMCIgeTE9IjAiIHgyPSI4MCIgeTI9IjcwIiBzdHlsZT0ic3Ryb2tlLXdpZHRoOjIiPjwvbGluZT4KICA8bGluZSB4MT0iMzIiIHkxPSIwIiB4Mj0iMTAyIiB5Mj0iNzAiPjwvbGluZT4KICA8bGluZSB4MT0iNDMiIHkxPSIwIiB4Mj0iMTEzIiB5Mj0iNzAiIHN0eWxlPSJzdHJva2Utd2lkdGg6MiI+PC9saW5lPgoKICA8IS0tIENvbG9yZWQgUmVjdGFuZ2xlIC0tPgogIDxwb2x5Z29uIHBvaW50cz0iMTAuMCwwLjAgNDMuMTY3MDI5MDQwNTE4OTEsMC4wIDExMy43NTUyNjQzMzQ2MzY1Niw3MC41ODgyMzUyOTQxMTc2NSA4MC41ODgyMzUyOTQxMTc2NSw3MC41ODgyMzUyOTQxMTc2NSIgc3R5bGU9ImZpbGw6I0VDQjE3MkEwO3N0cm9rZS13aWR0aDowIj48L3BvbHlnb24+CgogIDwhLS0gSG9yaXpvbnRhbCBsaW5lcyAtLT4KICA8bGluZSB4MT0iODAiIHkxPSI3MCIgeDI9IjExMyIgeTI9IjcwIiBzdHlsZT0ic3Ryb2tlLXdpZHRoOjIiPjwvbGluZT4KICA8bGluZSB4MT0iODAiIHkxPSIxMDIiIHgyPSIxMTMiIHkyPSIxMDIiIHN0eWxlPSJzdHJva2Utd2lkdGg6MiI+PC9saW5lPgoKICA8IS0tIFZlcnRpY2FsIGxpbmVzIC0tPgogIDxsaW5lIHgxPSI4MCIgeTE9IjcwIiB4Mj0iODAiIHkyPSIxMDIiIHN0eWxlPSJzdHJva2Utd2lkdGg6MiI+PC9saW5lPgogIDxsaW5lIHgxPSIxMDIiIHkxPSI3MCIgeDI9IjEwMiIgeTI9IjEwMiI+PC9saW5lPgogIDxsaW5lIHgxPSIxMTMiIHkxPSI3MCIgeDI9IjExMyIgeTI9IjEwMiIgc3R5bGU9InN0cm9rZS13aWR0aDoyIj48L2xpbmU+CgogIDwhLS0gQ29sb3JlZCBSZWN0YW5nbGUgLS0+CiAgPHBvbHlnb24gcG9pbnRzPSI4MC41ODgyMzUyOTQxMTc2NSw3MC41ODgyMzUyOTQxMTc2NSAxMTMuNzU1MjY0MzM0NjM2NTYsNzAuNTg4MjM1Mjk0MTE3NjUgMTEzLjc1NTI2NDMzNDYzNjU2LDEwMi42Nzc5OTA0Mjk2ODIgODAuNTg4MjM1Mjk0MTE3NjUsMTAyLjY3Nzk5MDQyOTY4MiIgc3R5bGU9ImZpbGw6I0VDQjE3MkEwO3N0cm9rZS13aWR0aDowIj48L3BvbHlnb24+CgogIDwhLS0gVGV4dCAtLT4KICA8dGV4dCB4PSI5Ny4xNzE3NTAiIHk9IjEyMi42Nzc5OTAiIGZvbnQtc2l6ZT0iMS4wcmVtIiBmb250LXdlaWdodD0iMTAwIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIj4zNzwvdGV4dD4KICA8dGV4dCB4PSIxMzMuNzU1MjY0IiB5PSI4Ni42MzMxMTMiIGZvbnQtc2l6ZT0iMS4wcmVtIiBmb250LXdlaWdodD0iMTAwIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiB0cmFuc2Zvcm09InJvdGF0ZSgwLDEzMy43NTUyNjQsODYuNjMzMTEzKSI+MzE8L3RleHQ+CiAgPHRleHQgeD0iMzUuMjk0MTE4IiB5PSI4Ny4zODM4NzMiIGZvbnQtc2l6ZT0iMS4wcmVtIiBmb250LXdlaWdodD0iMTAwIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiB0cmFuc2Zvcm09InJvdGF0ZSg0NSwzNS4yOTQxMTgsODcuMzgzODczKSI+OTIwPC90ZXh0Pgo8L3N2Zz4=" class="img-fluid"></td>
</tr>
</tbody>
</table>
</div>
<div class="xr-var-name">
<span>precipitation_era5</span>
</div>
<div class="xr-var-dims">
(time, lat, lon)
</div>
<div class="xr-var-dtype">
float32
</div>
<div class="xr-var-preview xr-preview">
dask.array&lt;chunksize=(222, 31, 25), meta=np.ndarray&gt;
</div>
<img src="data:image/svg+xml;base64,PHN2ZyBjbGFzcz0iaWNvbiB4ci1pY29uLWZpbGUtdGV4dDIiPjx1c2UgeGxpbms6aHJlZj0iI2ljb24tZmlsZS10ZXh0MiI+PC91c2U+PC9zdmc+" class="icon xr-icon-file-text2 img-fluid"><img src="data:image/svg+xml;base64,PHN2ZyBjbGFzcz0iaWNvbiB4ci1pY29uLWRhdGFiYXNlIj48dXNlIHhsaW5rOmhyZWY9IiNpY29uLWRhdGFiYXNlIj48L3VzZT48L3N2Zz4=" class="icon xr-icon-database img-fluid">
<div class="xr-var-attrs">
<dl>
<dt><span>acknowledgment :</span></dt>
<dd>
ERA5 hourly data on single levels from 1959 to present
</dd>
<dt><span>date_modified :</span></dt>
<dd>
2022-11-04 15:41:36.233472
</dd>
<dt><span>description :</span></dt>
<dd>
ERA5 Reanalysis Products
</dd>
<dt><span>geospatial_lat_max :</span></dt>
<dd>
89.875
</dd>
<dt><span>geospatial_lat_min :</span></dt>
<dd>
-89.875
</dd>
<dt><span>geospatial_lat_resolution :</span></dt>
<dd>
0.25
</dd>
<dt><span>geospatial_lon_max :</span></dt>
<dd>
179.875
</dd>
<dt><span>geospatial_lon_min :</span></dt>
<dd>
-179.875
</dd>
<dt><span>geospatial_lon_resolution :</span></dt>
<dd>
0.25
</dd>
<dt><span>license :</span></dt>
<dd>
Terms and conditions of the DeepESDL data distribution
</dd>
<dt><span>long_name :</span></dt>
<dd>
Total Precipitation
</dd>
<dt><span>original_add_offset :</span></dt>
<dd>
0.0
</dd>
<dt><span>original_name :</span></dt>
<dd>
tp
</dd>
<dt><span>original_scale_factor :</span></dt>
<dd>
1.0
</dd>
<dt><span>processing_steps :</span></dt>
<dd>
['Merging nc files', 'Resampling by daily sum', 'Converting to mm from m', 'Resampling by 8-day mean', 'Resampling to 0.25 degrees using bilinear interpolation']
</dd>
<dt><span>project :</span></dt>
<dd>
DeepESDL
</dd>
<dt><span>references :</span></dt>
<dd>
['https://confluence.ecmwf.int/display/CKB/ERA5%3A+data+documentation']
</dd>
<dt><span>reported_day :</span></dt>
<dd>
5.0
</dd>
<dt><span>source :</span></dt>
<dd>
['https://cds.climate.copernicus.eu/cdsapp#!/dataset/reanalysis-era5-single-levels']
</dd>
<dt><span>standard_name :</span></dt>
<dd>
total_precipitation
</dd>
<dt><span>temporal_resolution :</span></dt>
<dd>
8D
</dd>
<dt><span>time_coverage_end :</span></dt>
<dd>
2021-12-27T00:00:00.000000000
</dd>
<dt><span>time_coverage_start :</span></dt>
<dd>
1979-01-01T00:00:00.000000000
</dd>
<dt><span>time_period :</span></dt>
<dd>
8D
</dd>
<dt><span>units :</span></dt>
<dd>
mm d^-1
</dd>
</dl>
</div>
<div class="xr-var-data">
<table data-quarto-postprocess="true" class="table table-sm table-striped small">
<colgroup>
<col style="width: 50%">
<col style="width: 50%">
</colgroup>
<tbody>
<tr class="odd">
<td><table data-quarto-postprocess="true" class="table table-sm table-striped small">
<thead>
<tr class="header">
<th></th>
<th data-quarto-table-cell-role="th">Array</th>
<th data-quarto-table-cell-role="th">Chunk</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">Bytes</td>
<td>4.03 MiB</td>
<td>775.00 kiB</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Shape</td>
<td>(920, 31, 37)</td>
<td>(256, 31, 25)</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Dask graph</td>
<td colspan="2">8 chunks in 4 graph layers</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Data type</td>
<td colspan="2">float32 numpy.ndarray</td>
</tr>
</tbody>
</table></td>
<td><img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYzIiBoZWlnaHQ9IjE1MiIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxIj4KCiAgPCEtLSBIb3Jpem9udGFsIGxpbmVzIC0tPgogIDxsaW5lIHgxPSIxMCIgeTE9IjAiIHgyPSI4MCIgeTI9IjcwIiBzdHlsZT0ic3Ryb2tlLXdpZHRoOjIiPjwvbGluZT4KICA8bGluZSB4MT0iMTAiIHkxPSIzMiIgeDI9IjgwIiB5Mj0iMTAyIiBzdHlsZT0ic3Ryb2tlLXdpZHRoOjIiPjwvbGluZT4KCiAgPCEtLSBWZXJ0aWNhbCBsaW5lcyAtLT4KICA8bGluZSB4MT0iMTAiIHkxPSIwIiB4Mj0iMTAiIHkyPSIzMiIgc3R5bGU9InN0cm9rZS13aWR0aDoyIj48L2xpbmU+CiAgPGxpbmUgeDE9IjI3IiB5MT0iMTciIHgyPSIyNyIgeTI9IjQ5Ij48L2xpbmU+CiAgPGxpbmUgeDE9IjQ2IiB5MT0iMzYiIHgyPSI0NiIgeTI9IjY4Ij48L2xpbmU+CiAgPGxpbmUgeDE9IjY2IiB5MT0iNTYiIHgyPSI2NiIgeTI9Ijg4Ij48L2xpbmU+CiAgPGxpbmUgeDE9IjgwIiB5MT0iNzAiIHgyPSI4MCIgeTI9IjEwMiIgc3R5bGU9InN0cm9rZS13aWR0aDoyIj48L2xpbmU+CgogIDwhLS0gQ29sb3JlZCBSZWN0YW5nbGUgLS0+CiAgPHBvbHlnb24gcG9pbnRzPSIxMC4wLDAuMCA4MC41ODgyMzUyOTQxMTc2NSw3MC41ODgyMzUyOTQxMTc2NSA4MC41ODgyMzUyOTQxMTc2NSwxMDIuNjc3OTkwNDI5NjgyIDEwLjAsMzIuMDg5NzU1MTM1NTY0MzQ2IiBzdHlsZT0iZmlsbDojRUNCMTcyQTA7c3Ryb2tlLXdpZHRoOjAiPjwvcG9seWdvbj4KCiAgPCEtLSBIb3Jpem9udGFsIGxpbmVzIC0tPgogIDxsaW5lIHgxPSIxMCIgeTE9IjAiIHgyPSI0MyIgeTI9IjAiIHN0eWxlPSJzdHJva2Utd2lkdGg6MiI+PC9saW5lPgogIDxsaW5lIHgxPSIyNyIgeTE9IjE3IiB4Mj0iNjAiIHkyPSIxNyI+PC9saW5lPgogIDxsaW5lIHgxPSI0NiIgeTE9IjM2IiB4Mj0iNzkiIHkyPSIzNiI+PC9saW5lPgogIDxsaW5lIHgxPSI2NiIgeTE9IjU2IiB4Mj0iOTkiIHkyPSI1NiI+PC9saW5lPgogIDxsaW5lIHgxPSI4MCIgeTE9IjcwIiB4Mj0iMTEzIiB5Mj0iNzAiIHN0eWxlPSJzdHJva2Utd2lkdGg6MiI+PC9saW5lPgoKICA8IS0tIFZlcnRpY2FsIGxpbmVzIC0tPgogIDxsaW5lIHgxPSIxMCIgeTE9IjAiIHgyPSI4MCIgeTI9IjcwIiBzdHlsZT0ic3Ryb2tlLXdpZHRoOjIiPjwvbGluZT4KICA8bGluZSB4MT0iMzIiIHkxPSIwIiB4Mj0iMTAyIiB5Mj0iNzAiPjwvbGluZT4KICA8bGluZSB4MT0iNDMiIHkxPSIwIiB4Mj0iMTEzIiB5Mj0iNzAiIHN0eWxlPSJzdHJva2Utd2lkdGg6MiI+PC9saW5lPgoKICA8IS0tIENvbG9yZWQgUmVjdGFuZ2xlIC0tPgogIDxwb2x5Z29uIHBvaW50cz0iMTAuMCwwLjAgNDMuMTY3MDI5MDQwNTE4OTEsMC4wIDExMy43NTUyNjQzMzQ2MzY1Niw3MC41ODgyMzUyOTQxMTc2NSA4MC41ODgyMzUyOTQxMTc2NSw3MC41ODgyMzUyOTQxMTc2NSIgc3R5bGU9ImZpbGw6I0VDQjE3MkEwO3N0cm9rZS13aWR0aDowIj48L3BvbHlnb24+CgogIDwhLS0gSG9yaXpvbnRhbCBsaW5lcyAtLT4KICA8bGluZSB4MT0iODAiIHkxPSI3MCIgeDI9IjExMyIgeTI9IjcwIiBzdHlsZT0ic3Ryb2tlLXdpZHRoOjIiPjwvbGluZT4KICA8bGluZSB4MT0iODAiIHkxPSIxMDIiIHgyPSIxMTMiIHkyPSIxMDIiIHN0eWxlPSJzdHJva2Utd2lkdGg6MiI+PC9saW5lPgoKICA8IS0tIFZlcnRpY2FsIGxpbmVzIC0tPgogIDxsaW5lIHgxPSI4MCIgeTE9IjcwIiB4Mj0iODAiIHkyPSIxMDIiIHN0eWxlPSJzdHJva2Utd2lkdGg6MiI+PC9saW5lPgogIDxsaW5lIHgxPSIxMDIiIHkxPSI3MCIgeDI9IjEwMiIgeTI9IjEwMiI+PC9saW5lPgogIDxsaW5lIHgxPSIxMTMiIHkxPSI3MCIgeDI9IjExMyIgeTI9IjEwMiIgc3R5bGU9InN0cm9rZS13aWR0aDoyIj48L2xpbmU+CgogIDwhLS0gQ29sb3JlZCBSZWN0YW5nbGUgLS0+CiAgPHBvbHlnb24gcG9pbnRzPSI4MC41ODgyMzUyOTQxMTc2NSw3MC41ODgyMzUyOTQxMTc2NSAxMTMuNzU1MjY0MzM0NjM2NTYsNzAuNTg4MjM1Mjk0MTE3NjUgMTEzLjc1NTI2NDMzNDYzNjU2LDEwMi42Nzc5OTA0Mjk2ODIgODAuNTg4MjM1Mjk0MTE3NjUsMTAyLjY3Nzk5MDQyOTY4MiIgc3R5bGU9ImZpbGw6I0VDQjE3MkEwO3N0cm9rZS13aWR0aDowIj48L3BvbHlnb24+CgogIDwhLS0gVGV4dCAtLT4KICA8dGV4dCB4PSI5Ny4xNzE3NTAiIHk9IjEyMi42Nzc5OTAiIGZvbnQtc2l6ZT0iMS4wcmVtIiBmb250LXdlaWdodD0iMTAwIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIj4zNzwvdGV4dD4KICA8dGV4dCB4PSIxMzMuNzU1MjY0IiB5PSI4Ni42MzMxMTMiIGZvbnQtc2l6ZT0iMS4wcmVtIiBmb250LXdlaWdodD0iMTAwIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiB0cmFuc2Zvcm09InJvdGF0ZSgwLDEzMy43NTUyNjQsODYuNjMzMTEzKSI+MzE8L3RleHQ+CiAgPHRleHQgeD0iMzUuMjk0MTE4IiB5PSI4Ny4zODM4NzMiIGZvbnQtc2l6ZT0iMS4wcmVtIiBmb250LXdlaWdodD0iMTAwIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiB0cmFuc2Zvcm09InJvdGF0ZSg0NSwzNS4yOTQxMTgsODcuMzgzODczKSI+OTIwPC90ZXh0Pgo8L3N2Zz4=" class="img-fluid"></td>
</tr>
</tbody>
</table>
</div>
<div class="xr-var-name">
<span>radiation_era5</span>
</div>
<div class="xr-var-dims">
(time, lat, lon)
</div>
<div class="xr-var-dtype">
float32
</div>
<div class="xr-var-preview xr-preview">
dask.array&lt;chunksize=(222, 31, 25), meta=np.ndarray&gt;
</div>
<img src="data:image/svg+xml;base64,PHN2ZyBjbGFzcz0iaWNvbiB4ci1pY29uLWZpbGUtdGV4dDIiPjx1c2UgeGxpbms6aHJlZj0iI2ljb24tZmlsZS10ZXh0MiI+PC91c2U+PC9zdmc+" class="icon xr-icon-file-text2 img-fluid"><img src="data:image/svg+xml;base64,PHN2ZyBjbGFzcz0iaWNvbiB4ci1pY29uLWRhdGFiYXNlIj48dXNlIHhsaW5rOmhyZWY9IiNpY29uLWRhdGFiYXNlIj48L3VzZT48L3N2Zz4=" class="icon xr-icon-database img-fluid">
<div class="xr-var-attrs">
<dl>
<dt><span>acknowledgment :</span></dt>
<dd>
ERA5 hourly data on single levels from 1959 to present
</dd>
<dt><span>date_modified :</span></dt>
<dd>
2022-11-04 15:41:36.233472
</dd>
<dt><span>description :</span></dt>
<dd>
ERA5 Reanalysis Products
</dd>
<dt><span>geospatial_lat_max :</span></dt>
<dd>
89.875
</dd>
<dt><span>geospatial_lat_min :</span></dt>
<dd>
-89.875
</dd>
<dt><span>geospatial_lat_resolution :</span></dt>
<dd>
0.25
</dd>
<dt><span>geospatial_lon_max :</span></dt>
<dd>
179.875
</dd>
<dt><span>geospatial_lon_min :</span></dt>
<dd>
-179.875
</dd>
<dt><span>geospatial_lon_resolution :</span></dt>
<dd>
0.25
</dd>
<dt><span>license :</span></dt>
<dd>
Terms and conditions of the DeepESDL data distribution
</dd>
<dt><span>long_name :</span></dt>
<dd>
Surface Net Solar Radiation
</dd>
<dt><span>original_add_offset :</span></dt>
<dd>
0.0
</dd>
<dt><span>original_name :</span></dt>
<dd>
ssr
</dd>
<dt><span>original_scale_factor :</span></dt>
<dd>
1.0
</dd>
<dt><span>processing_steps :</span></dt>
<dd>
['Merging nc files', 'Resampling by daily mean', 'Resampling by 8-day mean', 'Resampling to 0.25 degrees using bilinear interpolation']
</dd>
<dt><span>project :</span></dt>
<dd>
DeepESDL
</dd>
<dt><span>references :</span></dt>
<dd>
['https://confluence.ecmwf.int/display/CKB/ERA5%3A+data+documentation']
</dd>
<dt><span>reported_day :</span></dt>
<dd>
5.0
</dd>
<dt><span>source :</span></dt>
<dd>
['https://cds.climate.copernicus.eu/cdsapp#!/dataset/reanalysis-era5-single-levels']
</dd>
<dt><span>standard_name :</span></dt>
<dd>
surface_net_downward_shortwave_flux
</dd>
<dt><span>temporal_resolution :</span></dt>
<dd>
8D
</dd>
<dt><span>time_coverage_end :</span></dt>
<dd>
2021-12-27T00:00:00.000000000
</dd>
<dt><span>time_coverage_start :</span></dt>
<dd>
1979-01-01T00:00:00.000000000
</dd>
<dt><span>time_period :</span></dt>
<dd>
8D
</dd>
<dt><span>units :</span></dt>
<dd>
J m^-2
</dd>
</dl>
</div>
<div class="xr-var-data">
<table data-quarto-postprocess="true" class="table table-sm table-striped small">
<colgroup>
<col style="width: 50%">
<col style="width: 50%">
</colgroup>
<tbody>
<tr class="odd">
<td><table data-quarto-postprocess="true" class="table table-sm table-striped small">
<thead>
<tr class="header">
<th></th>
<th data-quarto-table-cell-role="th">Array</th>
<th data-quarto-table-cell-role="th">Chunk</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">Bytes</td>
<td>4.03 MiB</td>
<td>775.00 kiB</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Shape</td>
<td>(920, 31, 37)</td>
<td>(256, 31, 25)</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Dask graph</td>
<td colspan="2">8 chunks in 4 graph layers</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Data type</td>
<td colspan="2">float32 numpy.ndarray</td>
</tr>
</tbody>
</table></td>
<td><img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYzIiBoZWlnaHQ9IjE1MiIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxIj4KCiAgPCEtLSBIb3Jpem9udGFsIGxpbmVzIC0tPgogIDxsaW5lIHgxPSIxMCIgeTE9IjAiIHgyPSI4MCIgeTI9IjcwIiBzdHlsZT0ic3Ryb2tlLXdpZHRoOjIiPjwvbGluZT4KICA8bGluZSB4MT0iMTAiIHkxPSIzMiIgeDI9IjgwIiB5Mj0iMTAyIiBzdHlsZT0ic3Ryb2tlLXdpZHRoOjIiPjwvbGluZT4KCiAgPCEtLSBWZXJ0aWNhbCBsaW5lcyAtLT4KICA8bGluZSB4MT0iMTAiIHkxPSIwIiB4Mj0iMTAiIHkyPSIzMiIgc3R5bGU9InN0cm9rZS13aWR0aDoyIj48L2xpbmU+CiAgPGxpbmUgeDE9IjI3IiB5MT0iMTciIHgyPSIyNyIgeTI9IjQ5Ij48L2xpbmU+CiAgPGxpbmUgeDE9IjQ2IiB5MT0iMzYiIHgyPSI0NiIgeTI9IjY4Ij48L2xpbmU+CiAgPGxpbmUgeDE9IjY2IiB5MT0iNTYiIHgyPSI2NiIgeTI9Ijg4Ij48L2xpbmU+CiAgPGxpbmUgeDE9IjgwIiB5MT0iNzAiIHgyPSI4MCIgeTI9IjEwMiIgc3R5bGU9InN0cm9rZS13aWR0aDoyIj48L2xpbmU+CgogIDwhLS0gQ29sb3JlZCBSZWN0YW5nbGUgLS0+CiAgPHBvbHlnb24gcG9pbnRzPSIxMC4wLDAuMCA4MC41ODgyMzUyOTQxMTc2NSw3MC41ODgyMzUyOTQxMTc2NSA4MC41ODgyMzUyOTQxMTc2NSwxMDIuNjc3OTkwNDI5NjgyIDEwLjAsMzIuMDg5NzU1MTM1NTY0MzQ2IiBzdHlsZT0iZmlsbDojRUNCMTcyQTA7c3Ryb2tlLXdpZHRoOjAiPjwvcG9seWdvbj4KCiAgPCEtLSBIb3Jpem9udGFsIGxpbmVzIC0tPgogIDxsaW5lIHgxPSIxMCIgeTE9IjAiIHgyPSI0MyIgeTI9IjAiIHN0eWxlPSJzdHJva2Utd2lkdGg6MiI+PC9saW5lPgogIDxsaW5lIHgxPSIyNyIgeTE9IjE3IiB4Mj0iNjAiIHkyPSIxNyI+PC9saW5lPgogIDxsaW5lIHgxPSI0NiIgeTE9IjM2IiB4Mj0iNzkiIHkyPSIzNiI+PC9saW5lPgogIDxsaW5lIHgxPSI2NiIgeTE9IjU2IiB4Mj0iOTkiIHkyPSI1NiI+PC9saW5lPgogIDxsaW5lIHgxPSI4MCIgeTE9IjcwIiB4Mj0iMTEzIiB5Mj0iNzAiIHN0eWxlPSJzdHJva2Utd2lkdGg6MiI+PC9saW5lPgoKICA8IS0tIFZlcnRpY2FsIGxpbmVzIC0tPgogIDxsaW5lIHgxPSIxMCIgeTE9IjAiIHgyPSI4MCIgeTI9IjcwIiBzdHlsZT0ic3Ryb2tlLXdpZHRoOjIiPjwvbGluZT4KICA8bGluZSB4MT0iMzIiIHkxPSIwIiB4Mj0iMTAyIiB5Mj0iNzAiPjwvbGluZT4KICA8bGluZSB4MT0iNDMiIHkxPSIwIiB4Mj0iMTEzIiB5Mj0iNzAiIHN0eWxlPSJzdHJva2Utd2lkdGg6MiI+PC9saW5lPgoKICA8IS0tIENvbG9yZWQgUmVjdGFuZ2xlIC0tPgogIDxwb2x5Z29uIHBvaW50cz0iMTAuMCwwLjAgNDMuMTY3MDI5MDQwNTE4OTEsMC4wIDExMy43NTUyNjQzMzQ2MzY1Niw3MC41ODgyMzUyOTQxMTc2NSA4MC41ODgyMzUyOTQxMTc2NSw3MC41ODgyMzUyOTQxMTc2NSIgc3R5bGU9ImZpbGw6I0VDQjE3MkEwO3N0cm9rZS13aWR0aDowIj48L3BvbHlnb24+CgogIDwhLS0gSG9yaXpvbnRhbCBsaW5lcyAtLT4KICA8bGluZSB4MT0iODAiIHkxPSI3MCIgeDI9IjExMyIgeTI9IjcwIiBzdHlsZT0ic3Ryb2tlLXdpZHRoOjIiPjwvbGluZT4KICA8bGluZSB4MT0iODAiIHkxPSIxMDIiIHgyPSIxMTMiIHkyPSIxMDIiIHN0eWxlPSJzdHJva2Utd2lkdGg6MiI+PC9saW5lPgoKICA8IS0tIFZlcnRpY2FsIGxpbmVzIC0tPgogIDxsaW5lIHgxPSI4MCIgeTE9IjcwIiB4Mj0iODAiIHkyPSIxMDIiIHN0eWxlPSJzdHJva2Utd2lkdGg6MiI+PC9saW5lPgogIDxsaW5lIHgxPSIxMDIiIHkxPSI3MCIgeDI9IjEwMiIgeTI9IjEwMiI+PC9saW5lPgogIDxsaW5lIHgxPSIxMTMiIHkxPSI3MCIgeDI9IjExMyIgeTI9IjEwMiIgc3R5bGU9InN0cm9rZS13aWR0aDoyIj48L2xpbmU+CgogIDwhLS0gQ29sb3JlZCBSZWN0YW5nbGUgLS0+CiAgPHBvbHlnb24gcG9pbnRzPSI4MC41ODgyMzUyOTQxMTc2NSw3MC41ODgyMzUyOTQxMTc2NSAxMTMuNzU1MjY0MzM0NjM2NTYsNzAuNTg4MjM1Mjk0MTE3NjUgMTEzLjc1NTI2NDMzNDYzNjU2LDEwMi42Nzc5OTA0Mjk2ODIgODAuNTg4MjM1Mjk0MTE3NjUsMTAyLjY3Nzk5MDQyOTY4MiIgc3R5bGU9ImZpbGw6I0VDQjE3MkEwO3N0cm9rZS13aWR0aDowIj48L3BvbHlnb24+CgogIDwhLS0gVGV4dCAtLT4KICA8dGV4dCB4PSI5Ny4xNzE3NTAiIHk9IjEyMi42Nzc5OTAiIGZvbnQtc2l6ZT0iMS4wcmVtIiBmb250LXdlaWdodD0iMTAwIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIj4zNzwvdGV4dD4KICA8dGV4dCB4PSIxMzMuNzU1MjY0IiB5PSI4Ni42MzMxMTMiIGZvbnQtc2l6ZT0iMS4wcmVtIiBmb250LXdlaWdodD0iMTAwIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiB0cmFuc2Zvcm09InJvdGF0ZSgwLDEzMy43NTUyNjQsODYuNjMzMTEzKSI+MzE8L3RleHQ+CiAgPHRleHQgeD0iMzUuMjk0MTE4IiB5PSI4Ny4zODM4NzMiIGZvbnQtc2l6ZT0iMS4wcmVtIiBmb250LXdlaWdodD0iMTAwIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiB0cmFuc2Zvcm09InJvdGF0ZSg0NSwzNS4yOTQxMTgsODcuMzgzODczKSI+OTIwPC90ZXh0Pgo8L3N2Zz4=" class="img-fluid"></td>
</tr>
</tbody>
</table>
</div>
<div class="xr-var-name">
<span>air_temperature_2m</span>
</div>
<div class="xr-var-dims">
(time, lat, lon)
</div>
<div class="xr-var-dtype">
float32
</div>
<div class="xr-var-preview xr-preview">
dask.array&lt;chunksize=(222, 31, 25), meta=np.ndarray&gt;
</div>
<img src="data:image/svg+xml;base64,PHN2ZyBjbGFzcz0iaWNvbiB4ci1pY29uLWZpbGUtdGV4dDIiPjx1c2UgeGxpbms6aHJlZj0iI2ljb24tZmlsZS10ZXh0MiI+PC91c2U+PC9zdmc+" class="icon xr-icon-file-text2 img-fluid"><img src="data:image/svg+xml;base64,PHN2ZyBjbGFzcz0iaWNvbiB4ci1pY29uLWRhdGFiYXNlIj48dXNlIHhsaW5rOmhyZWY9IiNpY29uLWRhdGFiYXNlIj48L3VzZT48L3N2Zz4=" class="icon xr-icon-database img-fluid">
<div class="xr-var-attrs">
<dl>
<dt><span>acknowledgment :</span></dt>
<dd>
ERA5 hourly data on single levels from 1959 to present
</dd>
<dt><span>date_modified :</span></dt>
<dd>
2022-11-04 15:41:36.233472
</dd>
<dt><span>description :</span></dt>
<dd>
ERA5 Reanalysis Products
</dd>
<dt><span>geospatial_lat_max :</span></dt>
<dd>
89.875
</dd>
<dt><span>geospatial_lat_min :</span></dt>
<dd>
-89.875
</dd>
<dt><span>geospatial_lat_resolution :</span></dt>
<dd>
0.25
</dd>
<dt><span>geospatial_lon_max :</span></dt>
<dd>
179.875
</dd>
<dt><span>geospatial_lon_min :</span></dt>
<dd>
-179.875
</dd>
<dt><span>geospatial_lon_resolution :</span></dt>
<dd>
0.25
</dd>
<dt><span>license :</span></dt>
<dd>
Terms and conditions of the DeepESDL data distribution
</dd>
<dt><span>long_name :</span></dt>
<dd>
Mean Air Temperature at 2 m
</dd>
<dt><span>original_add_offset :</span></dt>
<dd>
0.0
</dd>
<dt><span>original_name :</span></dt>
<dd>
t2m
</dd>
<dt><span>original_scale_factor :</span></dt>
<dd>
1.0
</dd>
<dt><span>processing_steps :</span></dt>
<dd>
['Merging nc files', 'Resampling by daily mean', 'Converting to °C from K', 'Resampling by 8-day mean', 'Resampling to 0.25 degrees using bilinear interpolation']
</dd>
<dt><span>project :</span></dt>
<dd>
DeepESDL
</dd>
<dt><span>references :</span></dt>
<dd>
['https://confluence.ecmwf.int/display/CKB/ERA5%3A+data+documentation']
</dd>
<dt><span>reported_day :</span></dt>
<dd>
5.0
</dd>
<dt><span>source :</span></dt>
<dd>
['https://cds.climate.copernicus.eu/cdsapp#!/dataset/reanalysis-era5-single-levels']
</dd>
<dt><span>standard_name :</span></dt>
<dd>
mean_air_temperature_2m
</dd>
<dt><span>temporal_resolution :</span></dt>
<dd>
8D
</dd>
<dt><span>time_coverage_end :</span></dt>
<dd>
2021-12-27T00:00:00.000000000
</dd>
<dt><span>time_coverage_start :</span></dt>
<dd>
1979-01-01T00:00:00.000000000
</dd>
<dt><span>time_period :</span></dt>
<dd>
8D
</dd>
<dt><span>units :</span></dt>
<dd>
°C
</dd>
</dl>
</div>
<div class="xr-var-data">
<table data-quarto-postprocess="true" class="table table-sm table-striped small">
<colgroup>
<col style="width: 50%">
<col style="width: 50%">
</colgroup>
<tbody>
<tr class="odd">
<td><table data-quarto-postprocess="true" class="table table-sm table-striped small">
<thead>
<tr class="header">
<th></th>
<th data-quarto-table-cell-role="th">Array</th>
<th data-quarto-table-cell-role="th">Chunk</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">Bytes</td>
<td>4.03 MiB</td>
<td>775.00 kiB</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Shape</td>
<td>(920, 31, 37)</td>
<td>(256, 31, 25)</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Dask graph</td>
<td colspan="2">8 chunks in 4 graph layers</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Data type</td>
<td colspan="2">float32 numpy.ndarray</td>
</tr>
</tbody>
</table></td>
<td><img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYzIiBoZWlnaHQ9IjE1MiIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxIj4KCiAgPCEtLSBIb3Jpem9udGFsIGxpbmVzIC0tPgogIDxsaW5lIHgxPSIxMCIgeTE9IjAiIHgyPSI4MCIgeTI9IjcwIiBzdHlsZT0ic3Ryb2tlLXdpZHRoOjIiPjwvbGluZT4KICA8bGluZSB4MT0iMTAiIHkxPSIzMiIgeDI9IjgwIiB5Mj0iMTAyIiBzdHlsZT0ic3Ryb2tlLXdpZHRoOjIiPjwvbGluZT4KCiAgPCEtLSBWZXJ0aWNhbCBsaW5lcyAtLT4KICA8bGluZSB4MT0iMTAiIHkxPSIwIiB4Mj0iMTAiIHkyPSIzMiIgc3R5bGU9InN0cm9rZS13aWR0aDoyIj48L2xpbmU+CiAgPGxpbmUgeDE9IjI3IiB5MT0iMTciIHgyPSIyNyIgeTI9IjQ5Ij48L2xpbmU+CiAgPGxpbmUgeDE9IjQ2IiB5MT0iMzYiIHgyPSI0NiIgeTI9IjY4Ij48L2xpbmU+CiAgPGxpbmUgeDE9IjY2IiB5MT0iNTYiIHgyPSI2NiIgeTI9Ijg4Ij48L2xpbmU+CiAgPGxpbmUgeDE9IjgwIiB5MT0iNzAiIHgyPSI4MCIgeTI9IjEwMiIgc3R5bGU9InN0cm9rZS13aWR0aDoyIj48L2xpbmU+CgogIDwhLS0gQ29sb3JlZCBSZWN0YW5nbGUgLS0+CiAgPHBvbHlnb24gcG9pbnRzPSIxMC4wLDAuMCA4MC41ODgyMzUyOTQxMTc2NSw3MC41ODgyMzUyOTQxMTc2NSA4MC41ODgyMzUyOTQxMTc2NSwxMDIuNjc3OTkwNDI5NjgyIDEwLjAsMzIuMDg5NzU1MTM1NTY0MzQ2IiBzdHlsZT0iZmlsbDojRUNCMTcyQTA7c3Ryb2tlLXdpZHRoOjAiPjwvcG9seWdvbj4KCiAgPCEtLSBIb3Jpem9udGFsIGxpbmVzIC0tPgogIDxsaW5lIHgxPSIxMCIgeTE9IjAiIHgyPSI0MyIgeTI9IjAiIHN0eWxlPSJzdHJva2Utd2lkdGg6MiI+PC9saW5lPgogIDxsaW5lIHgxPSIyNyIgeTE9IjE3IiB4Mj0iNjAiIHkyPSIxNyI+PC9saW5lPgogIDxsaW5lIHgxPSI0NiIgeTE9IjM2IiB4Mj0iNzkiIHkyPSIzNiI+PC9saW5lPgogIDxsaW5lIHgxPSI2NiIgeTE9IjU2IiB4Mj0iOTkiIHkyPSI1NiI+PC9saW5lPgogIDxsaW5lIHgxPSI4MCIgeTE9IjcwIiB4Mj0iMTEzIiB5Mj0iNzAiIHN0eWxlPSJzdHJva2Utd2lkdGg6MiI+PC9saW5lPgoKICA8IS0tIFZlcnRpY2FsIGxpbmVzIC0tPgogIDxsaW5lIHgxPSIxMCIgeTE9IjAiIHgyPSI4MCIgeTI9IjcwIiBzdHlsZT0ic3Ryb2tlLXdpZHRoOjIiPjwvbGluZT4KICA8bGluZSB4MT0iMzIiIHkxPSIwIiB4Mj0iMTAyIiB5Mj0iNzAiPjwvbGluZT4KICA8bGluZSB4MT0iNDMiIHkxPSIwIiB4Mj0iMTEzIiB5Mj0iNzAiIHN0eWxlPSJzdHJva2Utd2lkdGg6MiI+PC9saW5lPgoKICA8IS0tIENvbG9yZWQgUmVjdGFuZ2xlIC0tPgogIDxwb2x5Z29uIHBvaW50cz0iMTAuMCwwLjAgNDMuMTY3MDI5MDQwNTE4OTEsMC4wIDExMy43NTUyNjQzMzQ2MzY1Niw3MC41ODgyMzUyOTQxMTc2NSA4MC41ODgyMzUyOTQxMTc2NSw3MC41ODgyMzUyOTQxMTc2NSIgc3R5bGU9ImZpbGw6I0VDQjE3MkEwO3N0cm9rZS13aWR0aDowIj48L3BvbHlnb24+CgogIDwhLS0gSG9yaXpvbnRhbCBsaW5lcyAtLT4KICA8bGluZSB4MT0iODAiIHkxPSI3MCIgeDI9IjExMyIgeTI9IjcwIiBzdHlsZT0ic3Ryb2tlLXdpZHRoOjIiPjwvbGluZT4KICA8bGluZSB4MT0iODAiIHkxPSIxMDIiIHgyPSIxMTMiIHkyPSIxMDIiIHN0eWxlPSJzdHJva2Utd2lkdGg6MiI+PC9saW5lPgoKICA8IS0tIFZlcnRpY2FsIGxpbmVzIC0tPgogIDxsaW5lIHgxPSI4MCIgeTE9IjcwIiB4Mj0iODAiIHkyPSIxMDIiIHN0eWxlPSJzdHJva2Utd2lkdGg6MiI+PC9saW5lPgogIDxsaW5lIHgxPSIxMDIiIHkxPSI3MCIgeDI9IjEwMiIgeTI9IjEwMiI+PC9saW5lPgogIDxsaW5lIHgxPSIxMTMiIHkxPSI3MCIgeDI9IjExMyIgeTI9IjEwMiIgc3R5bGU9InN0cm9rZS13aWR0aDoyIj48L2xpbmU+CgogIDwhLS0gQ29sb3JlZCBSZWN0YW5nbGUgLS0+CiAgPHBvbHlnb24gcG9pbnRzPSI4MC41ODgyMzUyOTQxMTc2NSw3MC41ODgyMzUyOTQxMTc2NSAxMTMuNzU1MjY0MzM0NjM2NTYsNzAuNTg4MjM1Mjk0MTE3NjUgMTEzLjc1NTI2NDMzNDYzNjU2LDEwMi42Nzc5OTA0Mjk2ODIgODAuNTg4MjM1Mjk0MTE3NjUsMTAyLjY3Nzk5MDQyOTY4MiIgc3R5bGU9ImZpbGw6I0VDQjE3MkEwO3N0cm9rZS13aWR0aDowIj48L3BvbHlnb24+CgogIDwhLS0gVGV4dCAtLT4KICA8dGV4dCB4PSI5Ny4xNzE3NTAiIHk9IjEyMi42Nzc5OTAiIGZvbnQtc2l6ZT0iMS4wcmVtIiBmb250LXdlaWdodD0iMTAwIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIj4zNzwvdGV4dD4KICA8dGV4dCB4PSIxMzMuNzU1MjY0IiB5PSI4Ni42MzMxMTMiIGZvbnQtc2l6ZT0iMS4wcmVtIiBmb250LXdlaWdodD0iMTAwIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiB0cmFuc2Zvcm09InJvdGF0ZSgwLDEzMy43NTUyNjQsODYuNjMzMTEzKSI+MzE8L3RleHQ+CiAgPHRleHQgeD0iMzUuMjk0MTE4IiB5PSI4Ny4zODM4NzMiIGZvbnQtc2l6ZT0iMS4wcmVtIiBmb250LXdlaWdodD0iMTAwIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiB0cmFuc2Zvcm09InJvdGF0ZSg0NSwzNS4yOTQxMTgsODcuMzgzODczKSI+OTIwPC90ZXh0Pgo8L3N2Zz4=" class="img-fluid"></td>
</tr>
</tbody>
</table>
</div>
<div class="xr-var-name">
<span>max_air_temperature_2m</span>
</div>
<div class="xr-var-dims">
(time, lat, lon)
</div>
<div class="xr-var-dtype">
float32
</div>
<div class="xr-var-preview xr-preview">
dask.array&lt;chunksize=(222, 31, 25), meta=np.ndarray&gt;
</div>
<img src="data:image/svg+xml;base64,PHN2ZyBjbGFzcz0iaWNvbiB4ci1pY29uLWZpbGUtdGV4dDIiPjx1c2UgeGxpbms6aHJlZj0iI2ljb24tZmlsZS10ZXh0MiI+PC91c2U+PC9zdmc+" class="icon xr-icon-file-text2 img-fluid"><img src="data:image/svg+xml;base64,PHN2ZyBjbGFzcz0iaWNvbiB4ci1pY29uLWRhdGFiYXNlIj48dXNlIHhsaW5rOmhyZWY9IiNpY29uLWRhdGFiYXNlIj48L3VzZT48L3N2Zz4=" class="icon xr-icon-database img-fluid">
<div class="xr-var-attrs">
<dl>
<dt><span>acknowledgment :</span></dt>
<dd>
ERA5 hourly data on single levels from 1959 to present
</dd>
<dt><span>date_modified :</span></dt>
<dd>
2022-11-04 15:41:36.233472
</dd>
<dt><span>description :</span></dt>
<dd>
ERA5 Reanalysis Products
</dd>
<dt><span>geospatial_lat_max :</span></dt>
<dd>
89.875
</dd>
<dt><span>geospatial_lat_min :</span></dt>
<dd>
-89.875
</dd>
<dt><span>geospatial_lat_resolution :</span></dt>
<dd>
0.25
</dd>
<dt><span>geospatial_lon_max :</span></dt>
<dd>
179.875
</dd>
<dt><span>geospatial_lon_min :</span></dt>
<dd>
-179.875
</dd>
<dt><span>geospatial_lon_resolution :</span></dt>
<dd>
0.25
</dd>
<dt><span>license :</span></dt>
<dd>
Terms and conditions of the DeepESDL data distribution
</dd>
<dt><span>long_name :</span></dt>
<dd>
Maximum Air Temperature at 2 m
</dd>
<dt><span>original_add_offset :</span></dt>
<dd>
0.0
</dd>
<dt><span>original_name :</span></dt>
<dd>
t2m_max
</dd>
<dt><span>original_scale_factor :</span></dt>
<dd>
1.0
</dd>
<dt><span>processing_steps :</span></dt>
<dd>
['Merging nc files', 'Resampling by daily max', 'Converting to °C from K', 'Resampling by 8-day max', 'Resampling to 0.25 degrees using bilinear interpolation']
</dd>
<dt><span>project :</span></dt>
<dd>
DeepESDL
</dd>
<dt><span>references :</span></dt>
<dd>
['https://confluence.ecmwf.int/display/CKB/ERA5%3A+data+documentation']
</dd>
<dt><span>reported_day :</span></dt>
<dd>
5.0
</dd>
<dt><span>source :</span></dt>
<dd>
['https://cds.climate.copernicus.eu/cdsapp#!/dataset/reanalysis-era5-single-levels']
</dd>
<dt><span>standard_name :</span></dt>
<dd>
max_air_temperature_2m
</dd>
<dt><span>temporal_resolution :</span></dt>
<dd>
8D
</dd>
<dt><span>time_coverage_end :</span></dt>
<dd>
2021-12-27T00:00:00.000000000
</dd>
<dt><span>time_coverage_start :</span></dt>
<dd>
1979-01-01T00:00:00.000000000
</dd>
<dt><span>time_period :</span></dt>
<dd>
8D
</dd>
<dt><span>units :</span></dt>
<dd>
°C
</dd>
</dl>
</div>
<div class="xr-var-data">
<table data-quarto-postprocess="true" class="table table-sm table-striped small">
<colgroup>
<col style="width: 50%">
<col style="width: 50%">
</colgroup>
<tbody>
<tr class="odd">
<td><table data-quarto-postprocess="true" class="table table-sm table-striped small">
<thead>
<tr class="header">
<th></th>
<th data-quarto-table-cell-role="th">Array</th>
<th data-quarto-table-cell-role="th">Chunk</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">Bytes</td>
<td>4.03 MiB</td>
<td>775.00 kiB</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Shape</td>
<td>(920, 31, 37)</td>
<td>(256, 31, 25)</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Dask graph</td>
<td colspan="2">8 chunks in 4 graph layers</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Data type</td>
<td colspan="2">float32 numpy.ndarray</td>
</tr>
</tbody>
</table></td>
<td><img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYzIiBoZWlnaHQ9IjE1MiIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxIj4KCiAgPCEtLSBIb3Jpem9udGFsIGxpbmVzIC0tPgogIDxsaW5lIHgxPSIxMCIgeTE9IjAiIHgyPSI4MCIgeTI9IjcwIiBzdHlsZT0ic3Ryb2tlLXdpZHRoOjIiPjwvbGluZT4KICA8bGluZSB4MT0iMTAiIHkxPSIzMiIgeDI9IjgwIiB5Mj0iMTAyIiBzdHlsZT0ic3Ryb2tlLXdpZHRoOjIiPjwvbGluZT4KCiAgPCEtLSBWZXJ0aWNhbCBsaW5lcyAtLT4KICA8bGluZSB4MT0iMTAiIHkxPSIwIiB4Mj0iMTAiIHkyPSIzMiIgc3R5bGU9InN0cm9rZS13aWR0aDoyIj48L2xpbmU+CiAgPGxpbmUgeDE9IjI3IiB5MT0iMTciIHgyPSIyNyIgeTI9IjQ5Ij48L2xpbmU+CiAgPGxpbmUgeDE9IjQ2IiB5MT0iMzYiIHgyPSI0NiIgeTI9IjY4Ij48L2xpbmU+CiAgPGxpbmUgeDE9IjY2IiB5MT0iNTYiIHgyPSI2NiIgeTI9Ijg4Ij48L2xpbmU+CiAgPGxpbmUgeDE9IjgwIiB5MT0iNzAiIHgyPSI4MCIgeTI9IjEwMiIgc3R5bGU9InN0cm9rZS13aWR0aDoyIj48L2xpbmU+CgogIDwhLS0gQ29sb3JlZCBSZWN0YW5nbGUgLS0+CiAgPHBvbHlnb24gcG9pbnRzPSIxMC4wLDAuMCA4MC41ODgyMzUyOTQxMTc2NSw3MC41ODgyMzUyOTQxMTc2NSA4MC41ODgyMzUyOTQxMTc2NSwxMDIuNjc3OTkwNDI5NjgyIDEwLjAsMzIuMDg5NzU1MTM1NTY0MzQ2IiBzdHlsZT0iZmlsbDojRUNCMTcyQTA7c3Ryb2tlLXdpZHRoOjAiPjwvcG9seWdvbj4KCiAgPCEtLSBIb3Jpem9udGFsIGxpbmVzIC0tPgogIDxsaW5lIHgxPSIxMCIgeTE9IjAiIHgyPSI0MyIgeTI9IjAiIHN0eWxlPSJzdHJva2Utd2lkdGg6MiI+PC9saW5lPgogIDxsaW5lIHgxPSIyNyIgeTE9IjE3IiB4Mj0iNjAiIHkyPSIxNyI+PC9saW5lPgogIDxsaW5lIHgxPSI0NiIgeTE9IjM2IiB4Mj0iNzkiIHkyPSIzNiI+PC9saW5lPgogIDxsaW5lIHgxPSI2NiIgeTE9IjU2IiB4Mj0iOTkiIHkyPSI1NiI+PC9saW5lPgogIDxsaW5lIHgxPSI4MCIgeTE9IjcwIiB4Mj0iMTEzIiB5Mj0iNzAiIHN0eWxlPSJzdHJva2Utd2lkdGg6MiI+PC9saW5lPgoKICA8IS0tIFZlcnRpY2FsIGxpbmVzIC0tPgogIDxsaW5lIHgxPSIxMCIgeTE9IjAiIHgyPSI4MCIgeTI9IjcwIiBzdHlsZT0ic3Ryb2tlLXdpZHRoOjIiPjwvbGluZT4KICA8bGluZSB4MT0iMzIiIHkxPSIwIiB4Mj0iMTAyIiB5Mj0iNzAiPjwvbGluZT4KICA8bGluZSB4MT0iNDMiIHkxPSIwIiB4Mj0iMTEzIiB5Mj0iNzAiIHN0eWxlPSJzdHJva2Utd2lkdGg6MiI+PC9saW5lPgoKICA8IS0tIENvbG9yZWQgUmVjdGFuZ2xlIC0tPgogIDxwb2x5Z29uIHBvaW50cz0iMTAuMCwwLjAgNDMuMTY3MDI5MDQwNTE4OTEsMC4wIDExMy43NTUyNjQzMzQ2MzY1Niw3MC41ODgyMzUyOTQxMTc2NSA4MC41ODgyMzUyOTQxMTc2NSw3MC41ODgyMzUyOTQxMTc2NSIgc3R5bGU9ImZpbGw6I0VDQjE3MkEwO3N0cm9rZS13aWR0aDowIj48L3BvbHlnb24+CgogIDwhLS0gSG9yaXpvbnRhbCBsaW5lcyAtLT4KICA8bGluZSB4MT0iODAiIHkxPSI3MCIgeDI9IjExMyIgeTI9IjcwIiBzdHlsZT0ic3Ryb2tlLXdpZHRoOjIiPjwvbGluZT4KICA8bGluZSB4MT0iODAiIHkxPSIxMDIiIHgyPSIxMTMiIHkyPSIxMDIiIHN0eWxlPSJzdHJva2Utd2lkdGg6MiI+PC9saW5lPgoKICA8IS0tIFZlcnRpY2FsIGxpbmVzIC0tPgogIDxsaW5lIHgxPSI4MCIgeTE9IjcwIiB4Mj0iODAiIHkyPSIxMDIiIHN0eWxlPSJzdHJva2Utd2lkdGg6MiI+PC9saW5lPgogIDxsaW5lIHgxPSIxMDIiIHkxPSI3MCIgeDI9IjEwMiIgeTI9IjEwMiI+PC9saW5lPgogIDxsaW5lIHgxPSIxMTMiIHkxPSI3MCIgeDI9IjExMyIgeTI9IjEwMiIgc3R5bGU9InN0cm9rZS13aWR0aDoyIj48L2xpbmU+CgogIDwhLS0gQ29sb3JlZCBSZWN0YW5nbGUgLS0+CiAgPHBvbHlnb24gcG9pbnRzPSI4MC41ODgyMzUyOTQxMTc2NSw3MC41ODgyMzUyOTQxMTc2NSAxMTMuNzU1MjY0MzM0NjM2NTYsNzAuNTg4MjM1Mjk0MTE3NjUgMTEzLjc1NTI2NDMzNDYzNjU2LDEwMi42Nzc5OTA0Mjk2ODIgODAuNTg4MjM1Mjk0MTE3NjUsMTAyLjY3Nzk5MDQyOTY4MiIgc3R5bGU9ImZpbGw6I0VDQjE3MkEwO3N0cm9rZS13aWR0aDowIj48L3BvbHlnb24+CgogIDwhLS0gVGV4dCAtLT4KICA8dGV4dCB4PSI5Ny4xNzE3NTAiIHk9IjEyMi42Nzc5OTAiIGZvbnQtc2l6ZT0iMS4wcmVtIiBmb250LXdlaWdodD0iMTAwIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIj4zNzwvdGV4dD4KICA8dGV4dCB4PSIxMzMuNzU1MjY0IiB5PSI4Ni42MzMxMTMiIGZvbnQtc2l6ZT0iMS4wcmVtIiBmb250LXdlaWdodD0iMTAwIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiB0cmFuc2Zvcm09InJvdGF0ZSgwLDEzMy43NTUyNjQsODYuNjMzMTEzKSI+MzE8L3RleHQ+CiAgPHRleHQgeD0iMzUuMjk0MTE4IiB5PSI4Ny4zODM4NzMiIGZvbnQtc2l6ZT0iMS4wcmVtIiBmb250LXdlaWdodD0iMTAwIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiB0cmFuc2Zvcm09InJvdGF0ZSg0NSwzNS4yOTQxMTgsODcuMzgzODczKSI+OTIwPC90ZXh0Pgo8L3N2Zz4=" class="img-fluid"></td>
</tr>
</tbody>
</table>
</div>
<div class="xr-var-name">
<span>min_air_temperature_2m</span>
</div>
<div class="xr-var-dims">
(time, lat, lon)
</div>
<div class="xr-var-dtype">
float32
</div>
<div class="xr-var-preview xr-preview">
dask.array&lt;chunksize=(222, 31, 25), meta=np.ndarray&gt;
</div>
<img src="data:image/svg+xml;base64,PHN2ZyBjbGFzcz0iaWNvbiB4ci1pY29uLWZpbGUtdGV4dDIiPjx1c2UgeGxpbms6aHJlZj0iI2ljb24tZmlsZS10ZXh0MiI+PC91c2U+PC9zdmc+" class="icon xr-icon-file-text2 img-fluid"><img src="data:image/svg+xml;base64,PHN2ZyBjbGFzcz0iaWNvbiB4ci1pY29uLWRhdGFiYXNlIj48dXNlIHhsaW5rOmhyZWY9IiNpY29uLWRhdGFiYXNlIj48L3VzZT48L3N2Zz4=" class="icon xr-icon-database img-fluid">
<div class="xr-var-attrs">
<dl>
<dt><span>acknowledgment :</span></dt>
<dd>
ERA5 hourly data on single levels from 1959 to present
</dd>
<dt><span>date_modified :</span></dt>
<dd>
2022-11-04 15:41:36.233472
</dd>
<dt><span>description :</span></dt>
<dd>
ERA5 Reanalysis Products
</dd>
<dt><span>geospatial_lat_max :</span></dt>
<dd>
89.875
</dd>
<dt><span>geospatial_lat_min :</span></dt>
<dd>
-89.875
</dd>
<dt><span>geospatial_lat_resolution :</span></dt>
<dd>
0.25
</dd>
<dt><span>geospatial_lon_max :</span></dt>
<dd>
179.875
</dd>
<dt><span>geospatial_lon_min :</span></dt>
<dd>
-179.875
</dd>
<dt><span>geospatial_lon_resolution :</span></dt>
<dd>
0.25
</dd>
<dt><span>license :</span></dt>
<dd>
Terms and conditions of the DeepESDL data distribution
</dd>
<dt><span>long_name :</span></dt>
<dd>
Minimum Air Temperature at 2 m
</dd>
<dt><span>original_add_offset :</span></dt>
<dd>
0.0
</dd>
<dt><span>original_name :</span></dt>
<dd>
t2m_min
</dd>
<dt><span>original_scale_factor :</span></dt>
<dd>
1.0
</dd>
<dt><span>processing_steps :</span></dt>
<dd>
['Merging nc files', 'Resampling by daily min', 'Converting to °C from K', 'Resampling by 8-day min', 'Resampling to 0.25 degrees using bilinear interpolation']
</dd>
<dt><span>project :</span></dt>
<dd>
DeepESDL
</dd>
<dt><span>references :</span></dt>
<dd>
['https://confluence.ecmwf.int/display/CKB/ERA5%3A+data+documentation']
</dd>
<dt><span>reported_day :</span></dt>
<dd>
5.0
</dd>
<dt><span>source :</span></dt>
<dd>
['https://cds.climate.copernicus.eu/cdsapp#!/dataset/reanalysis-era5-single-levels']
</dd>
<dt><span>standard_name :</span></dt>
<dd>
min_air_temperature_2m
</dd>
<dt><span>temporal_resolution :</span></dt>
<dd>
8D
</dd>
<dt><span>time_coverage_end :</span></dt>
<dd>
2021-12-27T00:00:00.000000000
</dd>
<dt><span>time_coverage_start :</span></dt>
<dd>
1979-01-01T00:00:00.000000000
</dd>
<dt><span>time_period :</span></dt>
<dd>
8D
</dd>
<dt><span>units :</span></dt>
<dd>
°C
</dd>
</dl>
</div>
<div class="xr-var-data">
<table data-quarto-postprocess="true" class="table table-sm table-striped small">
<colgroup>
<col style="width: 50%">
<col style="width: 50%">
</colgroup>
<tbody>
<tr class="odd">
<td><table data-quarto-postprocess="true" class="table table-sm table-striped small">
<thead>
<tr class="header">
<th></th>
<th data-quarto-table-cell-role="th">Array</th>
<th data-quarto-table-cell-role="th">Chunk</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">Bytes</td>
<td>4.03 MiB</td>
<td>775.00 kiB</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Shape</td>
<td>(920, 31, 37)</td>
<td>(256, 31, 25)</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Dask graph</td>
<td colspan="2">8 chunks in 4 graph layers</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Data type</td>
<td colspan="2">float32 numpy.ndarray</td>
</tr>
</tbody>
</table></td>
<td><img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYzIiBoZWlnaHQ9IjE1MiIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxIj4KCiAgPCEtLSBIb3Jpem9udGFsIGxpbmVzIC0tPgogIDxsaW5lIHgxPSIxMCIgeTE9IjAiIHgyPSI4MCIgeTI9IjcwIiBzdHlsZT0ic3Ryb2tlLXdpZHRoOjIiPjwvbGluZT4KICA8bGluZSB4MT0iMTAiIHkxPSIzMiIgeDI9IjgwIiB5Mj0iMTAyIiBzdHlsZT0ic3Ryb2tlLXdpZHRoOjIiPjwvbGluZT4KCiAgPCEtLSBWZXJ0aWNhbCBsaW5lcyAtLT4KICA8bGluZSB4MT0iMTAiIHkxPSIwIiB4Mj0iMTAiIHkyPSIzMiIgc3R5bGU9InN0cm9rZS13aWR0aDoyIj48L2xpbmU+CiAgPGxpbmUgeDE9IjI3IiB5MT0iMTciIHgyPSIyNyIgeTI9IjQ5Ij48L2xpbmU+CiAgPGxpbmUgeDE9IjQ2IiB5MT0iMzYiIHgyPSI0NiIgeTI9IjY4Ij48L2xpbmU+CiAgPGxpbmUgeDE9IjY2IiB5MT0iNTYiIHgyPSI2NiIgeTI9Ijg4Ij48L2xpbmU+CiAgPGxpbmUgeDE9IjgwIiB5MT0iNzAiIHgyPSI4MCIgeTI9IjEwMiIgc3R5bGU9InN0cm9rZS13aWR0aDoyIj48L2xpbmU+CgogIDwhLS0gQ29sb3JlZCBSZWN0YW5nbGUgLS0+CiAgPHBvbHlnb24gcG9pbnRzPSIxMC4wLDAuMCA4MC41ODgyMzUyOTQxMTc2NSw3MC41ODgyMzUyOTQxMTc2NSA4MC41ODgyMzUyOTQxMTc2NSwxMDIuNjc3OTkwNDI5NjgyIDEwLjAsMzIuMDg5NzU1MTM1NTY0MzQ2IiBzdHlsZT0iZmlsbDojRUNCMTcyQTA7c3Ryb2tlLXdpZHRoOjAiPjwvcG9seWdvbj4KCiAgPCEtLSBIb3Jpem9udGFsIGxpbmVzIC0tPgogIDxsaW5lIHgxPSIxMCIgeTE9IjAiIHgyPSI0MyIgeTI9IjAiIHN0eWxlPSJzdHJva2Utd2lkdGg6MiI+PC9saW5lPgogIDxsaW5lIHgxPSIyNyIgeTE9IjE3IiB4Mj0iNjAiIHkyPSIxNyI+PC9saW5lPgogIDxsaW5lIHgxPSI0NiIgeTE9IjM2IiB4Mj0iNzkiIHkyPSIzNiI+PC9saW5lPgogIDxsaW5lIHgxPSI2NiIgeTE9IjU2IiB4Mj0iOTkiIHkyPSI1NiI+PC9saW5lPgogIDxsaW5lIHgxPSI4MCIgeTE9IjcwIiB4Mj0iMTEzIiB5Mj0iNzAiIHN0eWxlPSJzdHJva2Utd2lkdGg6MiI+PC9saW5lPgoKICA8IS0tIFZlcnRpY2FsIGxpbmVzIC0tPgogIDxsaW5lIHgxPSIxMCIgeTE9IjAiIHgyPSI4MCIgeTI9IjcwIiBzdHlsZT0ic3Ryb2tlLXdpZHRoOjIiPjwvbGluZT4KICA8bGluZSB4MT0iMzIiIHkxPSIwIiB4Mj0iMTAyIiB5Mj0iNzAiPjwvbGluZT4KICA8bGluZSB4MT0iNDMiIHkxPSIwIiB4Mj0iMTEzIiB5Mj0iNzAiIHN0eWxlPSJzdHJva2Utd2lkdGg6MiI+PC9saW5lPgoKICA8IS0tIENvbG9yZWQgUmVjdGFuZ2xlIC0tPgogIDxwb2x5Z29uIHBvaW50cz0iMTAuMCwwLjAgNDMuMTY3MDI5MDQwNTE4OTEsMC4wIDExMy43NTUyNjQzMzQ2MzY1Niw3MC41ODgyMzUyOTQxMTc2NSA4MC41ODgyMzUyOTQxMTc2NSw3MC41ODgyMzUyOTQxMTc2NSIgc3R5bGU9ImZpbGw6I0VDQjE3MkEwO3N0cm9rZS13aWR0aDowIj48L3BvbHlnb24+CgogIDwhLS0gSG9yaXpvbnRhbCBsaW5lcyAtLT4KICA8bGluZSB4MT0iODAiIHkxPSI3MCIgeDI9IjExMyIgeTI9IjcwIiBzdHlsZT0ic3Ryb2tlLXdpZHRoOjIiPjwvbGluZT4KICA8bGluZSB4MT0iODAiIHkxPSIxMDIiIHgyPSIxMTMiIHkyPSIxMDIiIHN0eWxlPSJzdHJva2Utd2lkdGg6MiI+PC9saW5lPgoKICA8IS0tIFZlcnRpY2FsIGxpbmVzIC0tPgogIDxsaW5lIHgxPSI4MCIgeTE9IjcwIiB4Mj0iODAiIHkyPSIxMDIiIHN0eWxlPSJzdHJva2Utd2lkdGg6MiI+PC9saW5lPgogIDxsaW5lIHgxPSIxMDIiIHkxPSI3MCIgeDI9IjEwMiIgeTI9IjEwMiI+PC9saW5lPgogIDxsaW5lIHgxPSIxMTMiIHkxPSI3MCIgeDI9IjExMyIgeTI9IjEwMiIgc3R5bGU9InN0cm9rZS13aWR0aDoyIj48L2xpbmU+CgogIDwhLS0gQ29sb3JlZCBSZWN0YW5nbGUgLS0+CiAgPHBvbHlnb24gcG9pbnRzPSI4MC41ODgyMzUyOTQxMTc2NSw3MC41ODgyMzUyOTQxMTc2NSAxMTMuNzU1MjY0MzM0NjM2NTYsNzAuNTg4MjM1Mjk0MTE3NjUgMTEzLjc1NTI2NDMzNDYzNjU2LDEwMi42Nzc5OTA0Mjk2ODIgODAuNTg4MjM1Mjk0MTE3NjUsMTAyLjY3Nzk5MDQyOTY4MiIgc3R5bGU9ImZpbGw6I0VDQjE3MkEwO3N0cm9rZS13aWR0aDowIj48L3BvbHlnb24+CgogIDwhLS0gVGV4dCAtLT4KICA8dGV4dCB4PSI5Ny4xNzE3NTAiIHk9IjEyMi42Nzc5OTAiIGZvbnQtc2l6ZT0iMS4wcmVtIiBmb250LXdlaWdodD0iMTAwIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIj4zNzwvdGV4dD4KICA8dGV4dCB4PSIxMzMuNzU1MjY0IiB5PSI4Ni42MzMxMTMiIGZvbnQtc2l6ZT0iMS4wcmVtIiBmb250LXdlaWdodD0iMTAwIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiB0cmFuc2Zvcm09InJvdGF0ZSgwLDEzMy43NTUyNjQsODYuNjMzMTEzKSI+MzE8L3RleHQ+CiAgPHRleHQgeD0iMzUuMjk0MTE4IiB5PSI4Ny4zODM4NzMiIGZvbnQtc2l6ZT0iMS4wcmVtIiBmb250LXdlaWdodD0iMTAwIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiB0cmFuc2Zvcm09InJvdGF0ZSg0NSwzNS4yOTQxMTgsODcuMzgzODczKSI+OTIwPC90ZXh0Pgo8L3N2Zz4=" class="img-fluid"></td>
</tr>
</tbody>
</table>
</div>
</div></li></ul></div></li><li class="xr-section-item"><input id="section-c0f75e90-6ac8-496b-9f26-f6060c8dfb21" class="xr-section-summary-in" type="checkbox"><label for="section-c0f75e90-6ac8-496b-9f26-f6060c8dfb21" class="xr-section-summary">Indexes: <span>(3)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><ul class="xr-var-list"><li class="xr-var-item"><div class="xr-index-name"><div>lat</div></div><div class="xr-index-preview">PandasIndex</div><div></div><input id="index-774efb21-0f0f-4bc6-af2f-a1d0d2f1c23d" class="xr-index-data-in" type="checkbox"><label for="index-774efb21-0f0f-4bc6-af2f-a1d0d2f1c23d" title="Show/Hide index repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-index-data"><pre>PandasIndex(Index([47.375, 47.625, 47.875, 48.125, 48.375, 48.625, 48.875, 49.125, 49.375,
       49.625, 49.875, 50.125, 50.375, 50.625, 50.875, 51.125, 51.375, 51.625,
       51.875, 52.125, 52.375, 52.625, 52.875, 53.125, 53.375, 53.625, 53.875,
       54.125, 54.375, 54.625, 54.875],
      dtype='float64', name='lat'))</pre></div></li><li class="xr-var-item"><div class="xr-index-name"><div>lon</div></div><div class="xr-index-preview">PandasIndex</div><div></div><input id="index-3a93977a-9e89-487f-b719-7e640fdd3ba0" class="xr-index-data-in" type="checkbox"><label for="index-3a93977a-9e89-487f-b719-7e640fdd3ba0" title="Show/Hide index repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-index-data"><pre>PandasIndex(Index([ 5.875,  6.125,  6.375,  6.625,  6.875,  7.125,  7.375,  7.625,  7.875,
        8.125,  8.375,  8.625,  8.875,  9.125,  9.375,  9.625,  9.875, 10.125,
       10.375, 10.625, 10.875, 11.125, 11.375, 11.625, 11.875, 12.125, 12.375,
       12.625, 12.875, 13.125, 13.375, 13.625, 13.875, 14.125, 14.375, 14.625,
       14.875],
      dtype='float64', name='lon'))</pre></div></li><li class="xr-var-item"><div class="xr-index-name"><div>time</div></div><div class="xr-index-preview">PandasIndex</div><div></div><input id="index-b64ab449-3251-4ce1-96de-6ec085de17db" class="xr-index-data-in" type="checkbox"><label for="index-b64ab449-3251-4ce1-96de-6ec085de17db" title="Show/Hide index repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-index-data"><pre>PandasIndex(DatetimeIndex(['2002-01-05', '2002-01-13', '2002-01-21', '2002-01-29',
               '2002-02-06', '2002-02-14', '2002-02-22', '2002-03-02',
               '2002-03-10', '2002-03-18',
               ...
               '2021-10-20', '2021-10-28', '2021-11-05', '2021-11-13',
               '2021-11-21', '2021-11-29', '2021-12-07', '2021-12-15',
               '2021-12-23', '2021-12-31'],
              dtype='datetime64[ns]', name='time', length=920, freq=None))</pre></div></li></ul></div></li><li class="xr-section-item"><input id="section-6a4b4c27-43ef-48dc-8914-9a7bb0829f81" class="xr-section-summary-in" type="checkbox"><label for="section-6a4b4c27-43ef-48dc-8914-9a7bb0829f81" class="xr-section-summary">Attributes: <span>(23)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><dl class="xr-attrs"><dt><span>Conventions :</span></dt><dd>CF-1.9</dd><dt><span>acknowledgment :</span></dt><dd>All ESDC data providers are acknowledged inside each variable</dd><dt><span>contributor_name :</span></dt><dd>['University of Leipzig', 'Max Planck Institute', 'Brockmann Consult GmbH']</dd><dt><span>contributor_url :</span></dt><dd>['https://www.uni-leipzig.de/', 'https://www.mpg.de/en', 'https://www.brockmann-consult.de/']</dd><dt><span>creator_name :</span></dt><dd>['University of Leipzig', 'Brockmann Consult GmbH']</dd><dt><span>creator_url :</span></dt><dd>['https://www.uni-leipzig.de/', 'https://www.brockmann-consult.de/']</dd><dt><span>date_modified :</span></dt><dd>2022-11-25 23:13:03.350030</dd><dt><span>geospatial_lat_max :</span></dt><dd>89.875</dd><dt><span>geospatial_lat_min :</span></dt><dd>-89.875</dd><dt><span>geospatial_lat_resolution :</span></dt><dd>0.25</dd><dt><span>geospatial_lon_max :</span></dt><dd>179.875</dd><dt><span>geospatial_lon_min :</span></dt><dd>-179.875</dd><dt><span>geospatial_lon_resolution :</span></dt><dd>0.25</dd><dt><span>id :</span></dt><dd>esdc-8d-0.25deg-256x128x128-3.0.1</dd><dt><span>license :</span></dt><dd>Terms and conditions of the DeepESDL data distribution</dd><dt><span>project :</span></dt><dd>DeepESDL</dd><dt><span>publisher_name :</span></dt><dd>DeepESDL Team</dd><dt><span>publisher_url :</span></dt><dd>https://www.earthsystemdatalab.net/</dd><dt><span>time_coverage_end :</span></dt><dd>2021-12-31T00:00:00.000000000</dd><dt><span>time_coverage_start :</span></dt><dd>1979-01-05T00:00:00.000000000</dd><dt><span>time_period :</span></dt><dd>8D</dd><dt><span>time_period_reported_day :</span></dt><dd>5.0</dd><dt><span>title :</span></dt><dd>Earth System Data Cube (ESDC) v3.0.1</dd></dl></div></li></ul></div></div>
</div>
</div>
<div class="cell" data-execution_count="31">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a data directory</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>data_path <span class="op">=</span> <span class="st">"data"</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>os.makedirs(data_path, exist_ok<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Create paths to the data</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>germany_shp_path, corine_file_path, cube_sample_path, cube_crop_path, cube_crop_mask_path <span class="op">=</span> create_paths(data_path<span class="op">=</span>data_path)</span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a subset of the Earth System Data Cube, containing only relevant variables and the desired spatial and temporal extent</span></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>cube_subset <span class="op">=</span> create_cube_subset()</span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a><span class="co"># remove attributes</span></span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a>cube_subset.attrs <span class="op">=</span> {}</span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(cube_subset)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>&lt;xarray.Dataset&gt; Size: 30MB
Dimensions:                 (time: 920, lat: 31, lon: 37)
Coordinates:
  * lat                     (lat) float64 248B 47.38 47.62 47.88 ... 54.62 54.88
  * lon                     (lon) float64 296B 5.875 6.125 6.375 ... 14.62 14.88
  * time                    (time) datetime64[ns] 7kB 2002-01-05 ... 2021-12-31
    spatial_ref             int64 8B 0
Data variables:
    sif_gosif               (time, lat, lon) float32 4MB dask.array&lt;chunksize=(222, 31, 25), meta=np.ndarray&gt;
    evaporation_era5        (time, lat, lon) float32 4MB dask.array&lt;chunksize=(222, 31, 25), meta=np.ndarray&gt;
    precipitation_era5      (time, lat, lon) float32 4MB dask.array&lt;chunksize=(222, 31, 25), meta=np.ndarray&gt;
    radiation_era5          (time, lat, lon) float32 4MB dask.array&lt;chunksize=(222, 31, 25), meta=np.ndarray&gt;
    air_temperature_2m      (time, lat, lon) float32 4MB dask.array&lt;chunksize=(222, 31, 25), meta=np.ndarray&gt;
    max_air_temperature_2m  (time, lat, lon) float32 4MB dask.array&lt;chunksize=(222, 31, 25), meta=np.ndarray&gt;
    min_air_temperature_2m  (time, lat, lon) float32 4MB dask.array&lt;chunksize=(222, 31, 25), meta=np.ndarray&gt;</code></pre>
</div>
</div>
</section>
<section id="downloading-auxillary-data" class="level2" data-number="1.2">
<h2 data-number="1.2" class="anchored" data-anchor-id="downloading-auxillary-data"><span class="header-section-number">1.2</span> Downloading auxillary data</h2>
<p>The first part of the analysis is to download and preprocess all the necassaty auxillary data:</p>
<ul>
<li>download german border shapefile</li>
<li>download and preprocess Corine data for the year 2000 (for the forest mask)</li>
<li>create sif sample tif for spatial resolution and transform (used later to resample corine data)</li>
</ul>
<p>Details: <a href="quarto_book/01_load_aux_data.html">2 Loading auxillary data</a></p>
<hr>
<p><strong>Plot showing the Corine Forest Cover data</strong></p>
<div class="cell" data-execution_count="32">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Load the germany border shapefile</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>germany_gpd <span class="op">=</span> gpd.read_file(germany_shp_path)</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Load the CORINE land cover data</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>corine_raster <span class="op">=</span> rio.open_rasterio(corine_file_path)</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a><span class="co"># set 0 to na</span></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>corine_raster <span class="op">=</span> corine_raster.where(corine_raster <span class="op">!=</span> <span class="dv">0</span>)</span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a><span class="co"># create parameters for plotting</span></span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a>cmap <span class="op">=</span> ListedColormap([<span class="st">'#66a61e'</span>, <span class="st">'#1b9e77'</span>, <span class="st">'#7570b3'</span>])</span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a>vmin <span class="op">=</span> <span class="dv">311</span><span class="op">;</span> vmax <span class="op">=</span> <span class="dv">313</span></span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a>legend_labels<span class="op">=</span>[<span class="st">'Decidious Forest'</span>, <span class="st">'Coniferous Forest'</span>, <span class="st">'Mixed Forest'</span>]</span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot the CORINE land cover data with the Germany border overlayed</span></span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots(figsize<span class="op">=</span>(<span class="dv">8</span>, <span class="dv">8</span>))</span>
<span id="cb5-18"><a href="#cb5-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-19"><a href="#cb5-19" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot Germany with gray fill and black boundary</span></span>
<span id="cb5-20"><a href="#cb5-20" aria-hidden="true" tabindex="-1"></a>germany_gpd.plot(ax<span class="op">=</span>ax, color<span class="op">=</span><span class="st">'lightgray'</span>, edgecolor<span class="op">=</span><span class="st">'black'</span>, alpha<span class="op">=</span><span class="dv">1</span>, linewidth<span class="op">=</span><span class="fl">1.5</span>)</span>
<span id="cb5-21"><a href="#cb5-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-22"><a href="#cb5-22" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot corine data</span></span>
<span id="cb5-23"><a href="#cb5-23" aria-hidden="true" tabindex="-1"></a>corine_raster.plot(ax<span class="op">=</span>ax, alpha<span class="op">=</span><span class="dv">1</span>, vmin<span class="op">=</span>vmin, vmax<span class="op">=</span>vmax, cmap<span class="op">=</span> cmap, add_colorbar<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb5-24"><a href="#cb5-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-25"><a href="#cb5-25" aria-hidden="true" tabindex="-1"></a>cbar <span class="op">=</span> fig.colorbar(plt.cm.ScalarMappable(norm<span class="op">=</span>Normalize(vmin<span class="op">=</span>vmin, vmax<span class="op">=</span>vmax), cmap<span class="op">=</span>cmap),</span>
<span id="cb5-26"><a href="#cb5-26" aria-hidden="true" tabindex="-1"></a>                    ax<span class="op">=</span>ax, fraction<span class="op">=</span><span class="fl">0.02</span>, pad<span class="op">=</span><span class="fl">0.04</span>)</span>
<span id="cb5-27"><a href="#cb5-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-28"><a href="#cb5-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-29"><a href="#cb5-29" aria-hidden="true" tabindex="-1"></a><span class="co"># set title</span></span>
<span id="cb5-30"><a href="#cb5-30" aria-hidden="true" tabindex="-1"></a>ax.set_title(<span class="st">"CORINE Land Cover Data"</span>, fontsize<span class="op">=</span><span class="dv">16</span>)</span>
<span id="cb5-31"><a href="#cb5-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-32"><a href="#cb5-32" aria-hidden="true" tabindex="-1"></a><span class="co"># Change color bar</span></span>
<span id="cb5-33"><a href="#cb5-33" aria-hidden="true" tabindex="-1"></a>ticks <span class="op">=</span> np.linspace(vmin, vmax, <span class="bu">len</span>(legend_labels))</span>
<span id="cb5-34"><a href="#cb5-34" aria-hidden="true" tabindex="-1"></a>cbar.set_ticks(ticks)</span>
<span id="cb5-35"><a href="#cb5-35" aria-hidden="true" tabindex="-1"></a>cbar.ax.set_yticklabels(legend_labels)</span>
<span id="cb5-36"><a href="#cb5-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-37"><a href="#cb5-37" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<p><img src="main_copy_files/figure-html/cell-5-output-1.png" class="img-fluid"></p>
</div>
</div>
</section>
<section id="preprocessing-the-cube" class="level2" data-number="1.3">
<h2 data-number="1.3" class="anchored" data-anchor-id="preprocessing-the-cube"><span class="header-section-number">1.3</span> Preprocessing the cube</h2>
<p>Next we preprocessed the subsetted data cube.</p>
<p>This includes:</p>
<ul>
<li><p>croping the cube with the german border shape</p></li>
<li><p>masking the cube with the corine forest cover:</p>
<ul>
<li>Calculate the forest percentage of the Corine landcover data over the cube grid</li>
<li>add the forest percentages to the cube</li>
<li>add a binary forest cover layer to the cube (0 for &lt;50% forest cover, 1 for &gt;=50% forest cover)</li>
<li>use the layer to mask the cube</li>
</ul></li>
</ul>
<p>The results are cube_subset_crop which is croped with the germany border and cube_subset_mask, masked with the forest cover.</p>
<p>Details: <a href="quarto_book/02_cube_preprocessing.html">2 Preprocessing ESDC</a></p>
<hr>
<p><strong>Visualization of Corine Data Processing.</strong></p>
<div class="cell" data-execution_count="33">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Load cube subset croped and cube subset mask</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>cube_subset_crop <span class="op">=</span> xr.open_dataset(cube_crop_path)</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>cube_subset_mask <span class="op">=</span> xr.open_dataset(cube_crop_mask_path)</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Load the forest percentages raster</span></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>forest_percentages <span class="op">=</span> rio.open_rasterio(cube_crop_path.replace(<span class="st">".nc"</span>, <span class="st">"_percentages.tif"</span>))</span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a grid spec with extra space at the bottom</span></span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>fig <span class="op">=</span> plt.figure(figsize<span class="op">=</span>(<span class="dv">14</span>, <span class="dv">8</span>))</span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>gs <span class="op">=</span> GridSpec(<span class="dv">2</span>, <span class="dv">3</span>, height_ratios<span class="op">=</span>[<span class="dv">1</span>, <span class="fl">0.03</span>], hspace<span class="op">=</span><span class="fl">0.15</span>)</span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Create subplots in the grid spec</span></span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a>ax0 <span class="op">=</span> fig.add_subplot(gs[<span class="dv">0</span>, <span class="dv">0</span>])</span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a>ax1 <span class="op">=</span> fig.add_subplot(gs[<span class="dv">0</span>, <span class="dv">1</span>])</span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a>ax2 <span class="op">=</span> fig.add_subplot(gs[<span class="dv">0</span>, <span class="dv">2</span>])</span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-17"><a href="#cb6-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot rasterio dataset</span></span>
<span id="cb6-18"><a href="#cb6-18" aria-hidden="true" tabindex="-1"></a>corine_raster.plot(ax<span class="op">=</span>ax0, alpha<span class="op">=</span><span class="dv">1</span>, vmin<span class="op">=</span>vmin, vmax<span class="op">=</span>vmax, cmap<span class="op">=</span>cmap, add_colorbar<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb6-19"><a href="#cb6-19" aria-hidden="true" tabindex="-1"></a>ax0.set_title(<span class="st">"Corine Forest Cover data"</span>)</span>
<span id="cb6-20"><a href="#cb6-20" aria-hidden="true" tabindex="-1"></a>ax0.set_ylabel(<span class="st">"Latitude"</span>)</span>
<span id="cb6-21"><a href="#cb6-21" aria-hidden="true" tabindex="-1"></a>ax0.set_xlabel(<span class="st">"Longitude"</span>)</span>
<span id="cb6-22"><a href="#cb6-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-23"><a href="#cb6-23" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot the forest percentages raster</span></span>
<span id="cb6-24"><a href="#cb6-24" aria-hidden="true" tabindex="-1"></a>forest_im <span class="op">=</span> forest_percentages.plot(ax<span class="op">=</span>ax1, alpha<span class="op">=</span><span class="dv">1</span>, add_colorbar<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb6-25"><a href="#cb6-25" aria-hidden="true" tabindex="-1"></a>ax1.set_title(<span class="st">"Resampled to percentages"</span>)</span>
<span id="cb6-26"><a href="#cb6-26" aria-hidden="true" tabindex="-1"></a>ax1.set_ylabel(<span class="st">""</span>)</span>
<span id="cb6-27"><a href="#cb6-27" aria-hidden="true" tabindex="-1"></a>ax1.set_xlabel(<span class="st">"Longitude"</span>)</span>
<span id="cb6-28"><a href="#cb6-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-29"><a href="#cb6-29" aria-hidden="true" tabindex="-1"></a><span class="co"># Add a colorbar at the bottom for the forest percentages raster</span></span>
<span id="cb6-30"><a href="#cb6-30" aria-hidden="true" tabindex="-1"></a>cax <span class="op">=</span> fig.add_subplot(gs[<span class="dv">1</span>, <span class="dv">1</span>])  <span class="co"># Add a subplot in the second row, middle column</span></span>
<span id="cb6-31"><a href="#cb6-31" aria-hidden="true" tabindex="-1"></a>cbar <span class="op">=</span> fig.colorbar(forest_im, cax<span class="op">=</span>cax, orientation<span class="op">=</span><span class="st">'horizontal'</span>)</span>
<span id="cb6-32"><a href="#cb6-32" aria-hidden="true" tabindex="-1"></a>cbar.set_label(<span class="st">"Forest cover in %"</span>)</span>
<span id="cb6-33"><a href="#cb6-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-34"><a href="#cb6-34" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot the forest cover 50% threshold</span></span>
<span id="cb6-35"><a href="#cb6-35" aria-hidden="true" tabindex="-1"></a>cube_subset_crop.forest_cover_50.plot(ax<span class="op">=</span>ax2, vmin<span class="op">=</span><span class="dv">0</span>, add_colorbar<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb6-36"><a href="#cb6-36" aria-hidden="true" tabindex="-1"></a>ax2.set_title(<span class="st">"50% Threshold"</span>)</span>
<span id="cb6-37"><a href="#cb6-37" aria-hidden="true" tabindex="-1"></a>ax2.set_ylabel(<span class="st">""</span>)</span>
<span id="cb6-38"><a href="#cb6-38" aria-hidden="true" tabindex="-1"></a>ax2.set_xlabel(<span class="st">"Longitude"</span>)</span>
<span id="cb6-39"><a href="#cb6-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-40"><a href="#cb6-40" aria-hidden="true" tabindex="-1"></a><span class="co"># Main title for the entire figure</span></span>
<span id="cb6-41"><a href="#cb6-41" aria-hidden="true" tabindex="-1"></a>fig.suptitle(<span class="st">"Corine Data Processing"</span>, fontsize<span class="op">=</span><span class="dv">16</span>)</span>
<span id="cb6-42"><a href="#cb6-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-43"><a href="#cb6-43" aria-hidden="true" tabindex="-1"></a><span class="co"># Adjust the layout to ensure everything fits well</span></span>
<span id="cb6-44"><a href="#cb6-44" aria-hidden="true" tabindex="-1"></a>plt.subplots_adjust(left<span class="op">=</span><span class="fl">0.05</span>, right<span class="op">=</span><span class="fl">0.95</span>, top<span class="op">=</span><span class="fl">0.90</span>, bottom<span class="op">=</span><span class="dv">0</span>)</span>
<span id="cb6-45"><a href="#cb6-45" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb6-46"><a href="#cb6-46" aria-hidden="true" tabindex="-1"></a></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<p><img src="main_copy_files/figure-html/cell-6-output-1.png" class="img-fluid"></p>
</div>
</div>
<hr>
<p><strong>Showing examplary timestep of croped and masked + croped cube</strong></p>
<div class="cell" data-execution_count="34">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create subplots</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>fig, axes <span class="op">=</span> plt.subplots(<span class="dv">1</span>, <span class="dv">2</span>, figsize<span class="op">=</span>(<span class="dv">10</span>, <span class="dv">5</span>))</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot the croped dataset</span></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>im <span class="op">=</span> cube_subset_crop.sif_gosif.isel(time<span class="op">=</span><span class="dv">20</span>).plot(ax<span class="op">=</span>axes[<span class="dv">0</span>],vmin<span class="op">=</span><span class="fl">0.2</span>,vmax<span class="op">=</span><span class="fl">0.6</span>, add_colorbar<span class="op">=</span><span class="va">False</span>, cmap<span class="op">=</span><span class="st">'viridis'</span>)</span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">0</span>].set_title(<span class="st">"Cube Subset Cropped"</span>)</span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">0</span>].set_xlabel(<span class="st">"Longitude"</span>)</span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">0</span>].set_ylabel(<span class="st">"Latitude"</span>)</span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot the masked dataset</span></span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a>cube_subset_mask.sif_gosif.isel(time<span class="op">=</span><span class="dv">20</span>).plot(ax<span class="op">=</span>axes[<span class="dv">1</span>],vmin<span class="op">=</span><span class="fl">0.2</span>,vmax<span class="op">=</span><span class="fl">0.6</span>, add_colorbar<span class="op">=</span><span class="va">True</span>, cmap<span class="op">=</span><span class="st">'viridis'</span>)</span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">1</span>].set_title(<span class="st">"Cube Subset Masked"</span>)</span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">1</span>].set_xlabel(<span class="st">"Longitude"</span>)</span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">1</span>].set_ylabel(<span class="st">""</span>)</span>
<span id="cb7-16"><a href="#cb7-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-17"><a href="#cb7-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Add germany border</span></span>
<span id="cb7-18"><a href="#cb7-18" aria-hidden="true" tabindex="-1"></a>germany_gpd.plot(ax<span class="op">=</span>axes[<span class="dv">0</span>], edgecolor<span class="op">=</span><span class="st">'black'</span>, alpha<span class="op">=</span><span class="dv">1</span>, linewidth<span class="op">=</span><span class="fl">1.5</span>, facecolor <span class="op">=</span> <span class="st">"none"</span>)</span>
<span id="cb7-19"><a href="#cb7-19" aria-hidden="true" tabindex="-1"></a>germany_gpd.plot(ax<span class="op">=</span>axes[<span class="dv">1</span>], edgecolor<span class="op">=</span><span class="st">'black'</span>, alpha<span class="op">=</span><span class="dv">1</span>, linewidth<span class="op">=</span><span class="fl">1.5</span>, facecolor <span class="op">=</span> <span class="st">"none"</span> )</span>
<span id="cb7-20"><a href="#cb7-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-21"><a href="#cb7-21" aria-hidden="true" tabindex="-1"></a><span class="co"># Adjust layout</span></span>
<span id="cb7-22"><a href="#cb7-22" aria-hidden="true" tabindex="-1"></a>plt.tight_layout(rect<span class="op">=</span>[<span class="dv">0</span>, <span class="dv">0</span>, <span class="fl">0.9</span>, <span class="dv">1</span>])  <span class="co"># Adjust rect to make room for the colorbar</span></span>
<span id="cb7-23"><a href="#cb7-23" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb7-24"><a href="#cb7-24" aria-hidden="true" tabindex="-1"></a></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<p><img src="main_copy_files/figure-html/cell-7-output-1.png" class="img-fluid"></p>
</div>
</div>
</section>
<section id="basic-analysis-of-sif-data" class="level2" data-number="1.4">
<h2 data-number="1.4" class="anchored" data-anchor-id="basic-analysis-of-sif-data"><span class="header-section-number">1.4</span> Basic Analysis of SIF-Data</h2>
<p>The next step in our analysis was to</p>
<ul>
<li>Perform a change detection by calculating the summer mean for each year and the change for the year 2018 to the baseline up to 2017</li>
</ul>
<p>Details: <a href="quarto_book/03_base_analysis.html">“3 Basic SIF Analysis”</a></p>
<hr>
<p><strong>Plot summer means for the SIF variable for the reference period 2000-2017, 2018 and the difference of them.</strong></p>
<p>We can see that the SIF values are lower in 2018 compared to the reference period, all over germany, except in some small areas, mostly in the Alps. This overlaps with our expectation, although this methodology does not relate the change to the Heatwave, but only shows that 2018 was a year with comparably low SIF over germany.</p>
<div class="cell" data-execution_count="42">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate the temporal changes in the variables using from s03_base_analysis.py</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>summer_sif_mean_cube, summer_mean_to_2017, changes <span class="op">=</span> base_analysis(cube_subset_crop, years<span class="op">=</span>[<span class="dv">2018</span>, <span class="dv">2019</span>])</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Select only year 2018 from mean over summer months</span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>summer_mean_2018 <span class="op">=</span> summer_sif_mean_cube.sel(year<span class="op">=</span><span class="dv">2018</span>)</span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot the changes using the function defined in s03_base_analysis.py</span></span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>change_plot(ref_period <span class="op">=</span> summer_mean_to_2017, data_2018 <span class="op">=</span> summer_mean_2018, changes <span class="op">=</span> changes)<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<p><img src="main_copy_files/figure-html/cell-8-output-1.png" class="img-fluid"></p>
</div>
</div>
<hr>
<p><strong>Plot Sif Time series (mean over masked cells in germany)</strong></p>
<p>In the timeseries we can see also see that the year 2018 had comparably low SIF values in the summer months compared to the preceeding years.</p>
<div class="cell" data-execution_count="41">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create plot of timeseries</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>plot_timeseries(cube_subset_mask, time_range<span class="op">=</span> [<span class="st">"2013-01-01"</span>, <span class="st">"2018-12-31"</span>], save_path <span class="op">=</span> os.path.join(<span class="st">"results"</span>, <span class="st">"figures"</span>, <span class="st">"timeseries_recent.png"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<p><img src="main_copy_files/figure-html/cell-9-output-1.png" class="img-fluid"></p>
</div>
</div>
</section>
<section id="prelimnary-modelling" class="level2" data-number="1.5">
<h2 data-number="1.5" class="anchored" data-anchor-id="prelimnary-modelling"><span class="header-section-number">1.5</span> Prelimnary Modelling</h2>
<p>To determine what is the appropriate model structure, we tested for different approaches.</p>
<p>Four general model setups were tested. These are differing in whether they are global or local models and whether they have an auto regressive component or not, meaning whether they encoperate a shifted version of the target variable (SIF) as a predictor.</p>
<p>To find the best hyperparameters 3 look back periods were tested and a grid search cross-validation was done.</p>
<p>Details: <a href="quarto_book/04_test_modelling.html">5 Prelimnary Modelling</a></p>
<hr>
<p><strong>Table showing mae and rmse model performances</strong></p>
<p>We can see that the local models clearly performed better. For that reason global models were not further considered.</p>
<div class="cell" data-execution_count="37">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> os</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> json</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> collections <span class="im">import</span> defaultdict</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Function to read JSON files and extract relevant data</span></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> read_json_files(base_dir):</span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Initialize a dictionary to store the extracted data</span></span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a>    results <span class="op">=</span> {</span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a>        <span class="st">"results_l15"</span>: {<span class="st">"auto"</span>: [], <span class="st">"noauto"</span>: []},</span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a>        <span class="st">"results_l30"</span>: {<span class="st">"auto"</span>: [], <span class="st">"noauto"</span>: [], <span class="st">"global_auto"</span>: [], <span class="st">"global_noauto"</span>: []},</span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a>        <span class="st">"results_l45"</span>: {<span class="st">"auto"</span>: [], <span class="st">"noauto"</span>: []},</span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb10-13"><a href="#cb10-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-14"><a href="#cb10-14" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Traverse through the base directory and subdirectories</span></span>
<span id="cb10-15"><a href="#cb10-15" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> lookback_dir <span class="kw">in</span> [<span class="st">"results_l15"</span>, <span class="st">"results_l30"</span>, <span class="st">"results_l45"</span>]:</span>
<span id="cb10-16"><a href="#cb10-16" aria-hidden="true" tabindex="-1"></a>        lookback_path <span class="op">=</span> os.path.join(base_dir, lookback_dir)</span>
<span id="cb10-17"><a href="#cb10-17" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="kw">not</span> os.path.isdir(lookback_path):</span>
<span id="cb10-18"><a href="#cb10-18" aria-hidden="true" tabindex="-1"></a>            <span class="cf">continue</span></span>
<span id="cb10-19"><a href="#cb10-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-20"><a href="#cb10-20" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Identify files containing "auto", "noauto", or "global" in their names</span></span>
<span id="cb10-21"><a href="#cb10-21" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> filename <span class="kw">in</span> os.listdir(lookback_path):</span>
<span id="cb10-22"><a href="#cb10-22" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> <span class="st">"global"</span> <span class="kw">in</span> filename:</span>
<span id="cb10-23"><a href="#cb10-23" aria-hidden="true" tabindex="-1"></a>                <span class="cf">continue</span></span>
<span id="cb10-24"><a href="#cb10-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-25"><a href="#cb10-25" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> <span class="st">"noauto"</span> <span class="kw">in</span> filename:</span>
<span id="cb10-26"><a href="#cb10-26" aria-hidden="true" tabindex="-1"></a>                key <span class="op">=</span> <span class="st">"noauto"</span></span>
<span id="cb10-27"><a href="#cb10-27" aria-hidden="true" tabindex="-1"></a>            <span class="cf">elif</span> <span class="st">"auto"</span> <span class="kw">in</span> filename:</span>
<span id="cb10-28"><a href="#cb10-28" aria-hidden="true" tabindex="-1"></a>                key <span class="op">=</span> <span class="st">"auto"</span></span>
<span id="cb10-29"><a href="#cb10-29" aria-hidden="true" tabindex="-1"></a>            <span class="cf">else</span>:</span>
<span id="cb10-30"><a href="#cb10-30" aria-hidden="true" tabindex="-1"></a>                <span class="cf">continue</span></span>
<span id="cb10-31"><a href="#cb10-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-32"><a href="#cb10-32" aria-hidden="true" tabindex="-1"></a>            file_path <span class="op">=</span> os.path.join(lookback_path, filename)</span>
<span id="cb10-33"><a href="#cb10-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-34"><a href="#cb10-34" aria-hidden="true" tabindex="-1"></a>            <span class="co"># Read and parse the JSON file</span></span>
<span id="cb10-35"><a href="#cb10-35" aria-hidden="true" tabindex="-1"></a>            <span class="cf">with</span> <span class="bu">open</span>(file_path, <span class="st">'r'</span>) <span class="im">as</span> <span class="bu">file</span>:</span>
<span id="cb10-36"><a href="#cb10-36" aria-hidden="true" tabindex="-1"></a>                data <span class="op">=</span> json.load(<span class="bu">file</span>)</span>
<span id="cb10-37"><a href="#cb10-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-38"><a href="#cb10-38" aria-hidden="true" tabindex="-1"></a>                <span class="co"># Extract relevant data and store it in the results dictionary</span></span>
<span id="cb10-39"><a href="#cb10-39" aria-hidden="true" tabindex="-1"></a>                <span class="cf">for</span> location, details <span class="kw">in</span> data.items():</span>
<span id="cb10-40"><a href="#cb10-40" aria-hidden="true" tabindex="-1"></a>                    result_entry <span class="op">=</span> {</span>
<span id="cb10-41"><a href="#cb10-41" aria-hidden="true" tabindex="-1"></a>                        <span class="st">"location"</span>: location,</span>
<span id="cb10-42"><a href="#cb10-42" aria-hidden="true" tabindex="-1"></a>                        <span class="st">"best_params"</span>: details.get(<span class="st">"best_params"</span>, {}),</span>
<span id="cb10-43"><a href="#cb10-43" aria-hidden="true" tabindex="-1"></a>                        <span class="st">"look_back"</span>: details.get(<span class="st">"look_back"</span>, <span class="dv">0</span>),</span>
<span id="cb10-44"><a href="#cb10-44" aria-hidden="true" tabindex="-1"></a>                        <span class="st">"evaluation"</span>: details.get(<span class="st">"evaluation"</span>, {}),</span>
<span id="cb10-45"><a href="#cb10-45" aria-hidden="true" tabindex="-1"></a>                    }</span>
<span id="cb10-46"><a href="#cb10-46" aria-hidden="true" tabindex="-1"></a>                    results[lookback_dir][key].append(result_entry)</span>
<span id="cb10-47"><a href="#cb10-47" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-48"><a href="#cb10-48" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> results</span>
<span id="cb10-49"><a href="#cb10-49" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-50"><a href="#cb10-50" aria-hidden="true" tabindex="-1"></a><span class="co"># Function to calculate mean performance metrics</span></span>
<span id="cb10-51"><a href="#cb10-51" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> calculate_mean_performance(results):</span>
<span id="cb10-52"><a href="#cb10-52" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Initialize dictionaries to store the sum and count of performance metrics</span></span>
<span id="cb10-53"><a href="#cb10-53" aria-hidden="true" tabindex="-1"></a>    performance_sums <span class="op">=</span> defaultdict(<span class="kw">lambda</span>: {<span class="st">"mae"</span>: <span class="dv">0</span>, <span class="st">"rmse"</span>: <span class="dv">0</span>, <span class="st">"count"</span>: <span class="dv">0</span>})</span>
<span id="cb10-54"><a href="#cb10-54" aria-hidden="true" tabindex="-1"></a>    mean_performance <span class="op">=</span> {}</span>
<span id="cb10-55"><a href="#cb10-55" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-56"><a href="#cb10-56" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Sum the performance metrics and count the number of entries</span></span>
<span id="cb10-57"><a href="#cb10-57" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> lookback <span class="kw">in</span> results:</span>
<span id="cb10-58"><a href="#cb10-58" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> auto_type <span class="kw">in</span> results[lookback]:</span>
<span id="cb10-59"><a href="#cb10-59" aria-hidden="true" tabindex="-1"></a>            <span class="cf">for</span> entry <span class="kw">in</span> results[lookback][auto_type]:</span>
<span id="cb10-60"><a href="#cb10-60" aria-hidden="true" tabindex="-1"></a>                evaluation <span class="op">=</span> entry[<span class="st">"evaluation"</span>]</span>
<span id="cb10-61"><a href="#cb10-61" aria-hidden="true" tabindex="-1"></a>                <span class="cf">if</span> <span class="st">"mae"</span> <span class="kw">in</span> evaluation <span class="kw">and</span> <span class="st">"rmse"</span> <span class="kw">in</span> evaluation:</span>
<span id="cb10-62"><a href="#cb10-62" aria-hidden="true" tabindex="-1"></a>                    performance_sums[<span class="ss">f"</span><span class="sc">{</span>lookback<span class="sc">}</span><span class="ss">_</span><span class="sc">{</span>auto_type<span class="sc">}</span><span class="ss">"</span>][<span class="st">"mae"</span>] <span class="op">+=</span> evaluation[<span class="st">"mae"</span>]</span>
<span id="cb10-63"><a href="#cb10-63" aria-hidden="true" tabindex="-1"></a>                    performance_sums[<span class="ss">f"</span><span class="sc">{</span>lookback<span class="sc">}</span><span class="ss">_</span><span class="sc">{</span>auto_type<span class="sc">}</span><span class="ss">"</span>][<span class="st">"rmse"</span>] <span class="op">+=</span> evaluation[<span class="st">"rmse"</span>]</span>
<span id="cb10-64"><a href="#cb10-64" aria-hidden="true" tabindex="-1"></a>                    performance_sums[<span class="ss">f"</span><span class="sc">{</span>lookback<span class="sc">}</span><span class="ss">_</span><span class="sc">{</span>auto_type<span class="sc">}</span><span class="ss">"</span>][<span class="st">"count"</span>] <span class="op">+=</span> <span class="dv">1</span></span>
<span id="cb10-65"><a href="#cb10-65" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-66"><a href="#cb10-66" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Calculate the mean performance metrics</span></span>
<span id="cb10-67"><a href="#cb10-67" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> key, sums <span class="kw">in</span> performance_sums.items():</span>
<span id="cb10-68"><a href="#cb10-68" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> sums[<span class="st">"count"</span>] <span class="op">&gt;</span> <span class="dv">0</span>:</span>
<span id="cb10-69"><a href="#cb10-69" aria-hidden="true" tabindex="-1"></a>            mean_performance[key] <span class="op">=</span> {</span>
<span id="cb10-70"><a href="#cb10-70" aria-hidden="true" tabindex="-1"></a>                <span class="st">"mean_mae"</span>: np.<span class="bu">round</span>(sums[<span class="st">"mae"</span>] <span class="op">/</span> sums[<span class="st">"count"</span>], <span class="dv">4</span>),</span>
<span id="cb10-71"><a href="#cb10-71" aria-hidden="true" tabindex="-1"></a>                <span class="st">"mean_rmse"</span>: np.<span class="bu">round</span>(sums[<span class="st">"rmse"</span>] <span class="op">/</span> sums[<span class="st">"count"</span>], <span class="dv">4</span>)</span>
<span id="cb10-72"><a href="#cb10-72" aria-hidden="true" tabindex="-1"></a>            }</span>
<span id="cb10-73"><a href="#cb10-73" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span>:</span>
<span id="cb10-74"><a href="#cb10-74" aria-hidden="true" tabindex="-1"></a>            mean_performance[key] <span class="op">=</span> {<span class="st">"mean_mae"</span>: <span class="va">None</span>, <span class="st">"mean_rmse"</span>: <span class="va">None</span>}</span>
<span id="cb10-75"><a href="#cb10-75" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-76"><a href="#cb10-76" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> mean_performance</span>
<span id="cb10-77"><a href="#cb10-77" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-78"><a href="#cb10-78" aria-hidden="true" tabindex="-1"></a><span class="co"># Base directory where the results folders are located</span></span>
<span id="cb10-79"><a href="#cb10-79" aria-hidden="true" tabindex="-1"></a>base_dir <span class="op">=</span> os.path.join(<span class="st">"results"</span>, <span class="st">"modelling"</span>)</span>
<span id="cb10-80"><a href="#cb10-80" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-81"><a href="#cb10-81" aria-hidden="true" tabindex="-1"></a><span class="co"># Read JSON files and extract data</span></span>
<span id="cb10-82"><a href="#cb10-82" aria-hidden="true" tabindex="-1"></a>results_data <span class="op">=</span> read_json_files(base_dir)</span>
<span id="cb10-83"><a href="#cb10-83" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-84"><a href="#cb10-84" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate mean performance metrics</span></span>
<span id="cb10-85"><a href="#cb10-85" aria-hidden="true" tabindex="-1"></a>mean_performance_data <span class="op">=</span> calculate_mean_performance(results_data)</span>
<span id="cb10-86"><a href="#cb10-86" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-87"><a href="#cb10-87" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-88"><a href="#cb10-88" aria-hidden="true" tabindex="-1"></a>globa_auto_path <span class="op">=</span> os.path.join(base_dir, <span class="st">"results_l30"</span>, <span class="st">"results_global_auto_l30.json"</span>)</span>
<span id="cb10-89"><a href="#cb10-89" aria-hidden="true" tabindex="-1"></a>global_noauto_path <span class="op">=</span> os.path.join(base_dir, <span class="st">"results_l30"</span>, <span class="st">"results_global_noauto_l30.json"</span>)</span>
<span id="cb10-90"><a href="#cb10-90" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-91"><a href="#cb10-91" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> get_mae_rmse_from_json(json_path):</span>
<span id="cb10-92"><a href="#cb10-92" aria-hidden="true" tabindex="-1"></a>    <span class="cf">with</span> <span class="bu">open</span>(json_path, <span class="st">'r'</span>) <span class="im">as</span> <span class="bu">file</span>:</span>
<span id="cb10-93"><a href="#cb10-93" aria-hidden="true" tabindex="-1"></a>        data <span class="op">=</span> json.load(<span class="bu">file</span>)</span>
<span id="cb10-94"><a href="#cb10-94" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> np.<span class="bu">round</span>(data[<span class="st">"evaluation"</span>][<span class="st">"mae"</span>],<span class="dv">3</span>), np.<span class="bu">round</span>(data[<span class="st">"evaluation"</span>][<span class="st">"rmse"</span>],<span class="dv">3</span>)</span>
<span id="cb10-95"><a href="#cb10-95" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-96"><a href="#cb10-96" aria-hidden="true" tabindex="-1"></a>global_results <span class="op">=</span> get_mae_rmse_from_json(globa_auto_path), get_mae_rmse_from_json(global_noauto_path)</span>
<span id="cb10-97"><a href="#cb10-97" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-98"><a href="#cb10-98" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb10-99"><a href="#cb10-99" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert the dictionary to a DataFrame</span></span>
<span id="cb10-100"><a href="#cb10-100" aria-hidden="true" tabindex="-1"></a>data <span class="op">=</span> []</span>
<span id="cb10-101"><a href="#cb10-101" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> key, values <span class="kw">in</span> mean_performance_data.items():</span>
<span id="cb10-102"><a href="#cb10-102" aria-hidden="true" tabindex="-1"></a>    lookback, auto_type <span class="op">=</span> key.rsplit(<span class="st">'_'</span>, <span class="dv">1</span>)</span>
<span id="cb10-103"><a href="#cb10-103" aria-hidden="true" tabindex="-1"></a>    data.append({</span>
<span id="cb10-104"><a href="#cb10-104" aria-hidden="true" tabindex="-1"></a>        <span class="st">'model'</span> : <span class="st">'local'</span>,</span>
<span id="cb10-105"><a href="#cb10-105" aria-hidden="true" tabindex="-1"></a>        <span class="st">'lookback'</span>: lookback[<span class="op">-</span><span class="dv">2</span>:],</span>
<span id="cb10-106"><a href="#cb10-106" aria-hidden="true" tabindex="-1"></a>        <span class="st">'type'</span>: auto_type,</span>
<span id="cb10-107"><a href="#cb10-107" aria-hidden="true" tabindex="-1"></a>        <span class="st">'mean_mae'</span>: values[<span class="st">'mean_mae'</span>],</span>
<span id="cb10-108"><a href="#cb10-108" aria-hidden="true" tabindex="-1"></a>        <span class="st">'mean_rmse'</span>: values[<span class="st">'mean_rmse'</span>]</span>
<span id="cb10-109"><a href="#cb10-109" aria-hidden="true" tabindex="-1"></a>    })</span>
<span id="cb10-110"><a href="#cb10-110" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-111"><a href="#cb10-111" aria-hidden="true" tabindex="-1"></a><span class="co"># Add global results to the data</span></span>
<span id="cb10-112"><a href="#cb10-112" aria-hidden="true" tabindex="-1"></a>data.append({</span>
<span id="cb10-113"><a href="#cb10-113" aria-hidden="true" tabindex="-1"></a>    <span class="st">'model'</span> : <span class="st">'global'</span>,</span>
<span id="cb10-114"><a href="#cb10-114" aria-hidden="true" tabindex="-1"></a>    <span class="st">'lookback'</span>: <span class="st">'30'</span>,</span>
<span id="cb10-115"><a href="#cb10-115" aria-hidden="true" tabindex="-1"></a>    <span class="st">'type'</span>: <span class="st">'auto'</span>,</span>
<span id="cb10-116"><a href="#cb10-116" aria-hidden="true" tabindex="-1"></a>    <span class="st">'mean_mae'</span>: global_results[<span class="dv">0</span>][<span class="dv">0</span>],</span>
<span id="cb10-117"><a href="#cb10-117" aria-hidden="true" tabindex="-1"></a>    <span class="st">'mean_rmse'</span>: global_results[<span class="dv">0</span>][<span class="dv">1</span>]</span>
<span id="cb10-118"><a href="#cb10-118" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb10-119"><a href="#cb10-119" aria-hidden="true" tabindex="-1"></a>data.append({</span>
<span id="cb10-120"><a href="#cb10-120" aria-hidden="true" tabindex="-1"></a>    <span class="st">'model'</span> : <span class="st">'global'</span>,</span>
<span id="cb10-121"><a href="#cb10-121" aria-hidden="true" tabindex="-1"></a>    <span class="st">'lookback'</span>: <span class="st">'30'</span>,</span>
<span id="cb10-122"><a href="#cb10-122" aria-hidden="true" tabindex="-1"></a>    <span class="st">'type'</span>: <span class="st">'noauto'</span>,</span>
<span id="cb10-123"><a href="#cb10-123" aria-hidden="true" tabindex="-1"></a>    <span class="st">'mean_mae'</span>: global_results[<span class="dv">1</span>][<span class="dv">0</span>],</span>
<span id="cb10-124"><a href="#cb10-124" aria-hidden="true" tabindex="-1"></a>    <span class="st">'mean_rmse'</span>: global_results[<span class="dv">1</span>][<span class="dv">1</span>]</span>
<span id="cb10-125"><a href="#cb10-125" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb10-126"><a href="#cb10-126" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-127"><a href="#cb10-127" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a DataFrame</span></span>
<span id="cb10-128"><a href="#cb10-128" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> pd.DataFrame(data)</span>
<span id="cb10-129"><a href="#cb10-129" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-130"><a href="#cb10-130" aria-hidden="true" tabindex="-1"></a><span class="co"># Display the DataFrame</span></span>
<span id="cb10-131"><a href="#cb10-131" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(df)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>    model lookback    type  mean_mae  mean_rmse
0   local       15    auto    0.0150     0.0217
1   local       15  noauto    0.0161     0.0228
2   local       30    auto    0.0144     0.0212
3   local       30  noauto    0.0142     0.0210
4   local       45    auto    0.0149     0.0218
5   local       45  noauto    0.0145     0.0211
6  global       30    auto    0.0330     0.0450
7  global       30  noauto    0.0330     0.0500</code></pre>
</div>
</div>
<hr>
<p><strong>Comparison between local models.</strong></p>
<p>The plot below shows the mean performances of all local models. The local model without autoregressive component and a lookback period of 30 was selected as the best model setup.</p>
<div class="cell" data-execution_count="38">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> matplotlib <span class="im">import</span> cm</span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> plot_performance_data(mean_performance_data):</span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Define colors and markers</span></span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>    colors <span class="op">=</span> {</span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>        <span class="st">'auto'</span>: <span class="st">"blue"</span>,</span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a>        <span class="st">'noauto'</span>: <span class="st">"orange"</span></span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a>    shades <span class="op">=</span> {</span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a>        <span class="st">'results_l15'</span>: <span class="fl">0.4</span>,</span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true" tabindex="-1"></a>        <span class="st">'results_l30'</span>: <span class="fl">0.7</span>,</span>
<span id="cb12-14"><a href="#cb12-14" aria-hidden="true" tabindex="-1"></a>        <span class="st">'results_l45'</span>: <span class="dv">1</span></span>
<span id="cb12-15"><a href="#cb12-15" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb12-16"><a href="#cb12-16" aria-hidden="true" tabindex="-1"></a>    markers <span class="op">=</span> [<span class="st">'o'</span>, <span class="st">'s'</span>, <span class="st">'D'</span>, <span class="st">'^'</span>]</span>
<span id="cb12-17"><a href="#cb12-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-18"><a href="#cb12-18" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Create a new figure</span></span>
<span id="cb12-19"><a href="#cb12-19" aria-hidden="true" tabindex="-1"></a>    plt.figure(figsize<span class="op">=</span>(<span class="dv">10</span>, <span class="dv">6</span>))</span>
<span id="cb12-20"><a href="#cb12-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-21"><a href="#cb12-21" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Plot data for each key in the mean performance data</span></span>
<span id="cb12-22"><a href="#cb12-22" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> idx, (key, performance) <span class="kw">in</span> <span class="bu">enumerate</span>(mean_performance_data.items()):</span>
<span id="cb12-23"><a href="#cb12-23" aria-hidden="true" tabindex="-1"></a>        lookback, auto_type <span class="op">=</span> key.rsplit(<span class="st">'_'</span>, <span class="dv">1</span>)</span>
<span id="cb12-24"><a href="#cb12-24" aria-hidden="true" tabindex="-1"></a>        color <span class="op">=</span> colors[auto_type]</span>
<span id="cb12-25"><a href="#cb12-25" aria-hidden="true" tabindex="-1"></a>        shade <span class="op">=</span> shades[lookback]</span>
<span id="cb12-26"><a href="#cb12-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-27"><a href="#cb12-27" aria-hidden="true" tabindex="-1"></a>        plt.scatter(performance[<span class="st">'mean_mae'</span>], performance[<span class="st">'mean_rmse'</span>], </span>
<span id="cb12-28"><a href="#cb12-28" aria-hidden="true" tabindex="-1"></a>                    color<span class="op">=</span>color, alpha<span class="op">=</span>shade, label<span class="op">=</span>key, s<span class="op">=</span><span class="dv">100</span>)</span>
<span id="cb12-29"><a href="#cb12-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-30"><a href="#cb12-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-31"><a href="#cb12-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-32"><a href="#cb12-32" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Add labels and title</span></span>
<span id="cb12-33"><a href="#cb12-33" aria-hidden="true" tabindex="-1"></a>    plt.xlabel(<span class="st">'Mean MAE'</span>)</span>
<span id="cb12-34"><a href="#cb12-34" aria-hidden="true" tabindex="-1"></a>    plt.ylabel(<span class="st">'Mean RMSE'</span>)</span>
<span id="cb12-35"><a href="#cb12-35" aria-hidden="true" tabindex="-1"></a>    plt.title(<span class="st">'Mean Model Performance Comparison local Models'</span>, fontsize<span class="op">=</span><span class="dv">16</span>)</span>
<span id="cb12-36"><a href="#cb12-36" aria-hidden="true" tabindex="-1"></a>    plt.legend(loc<span class="op">=</span><span class="st">'upper left'</span>, bbox_to_anchor<span class="op">=</span>(<span class="dv">1</span>, <span class="dv">1</span>))</span>
<span id="cb12-37"><a href="#cb12-37" aria-hidden="true" tabindex="-1"></a>    plt.grid(<span class="va">True</span>)</span>
<span id="cb12-38"><a href="#cb12-38" aria-hidden="true" tabindex="-1"></a>    plt.tight_layout()</span>
<span id="cb12-39"><a href="#cb12-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-40"><a href="#cb12-40" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Show plot</span></span>
<span id="cb12-41"><a href="#cb12-41" aria-hidden="true" tabindex="-1"></a>    plt.show()</span>
<span id="cb12-42"><a href="#cb12-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-43"><a href="#cb12-43" aria-hidden="true" tabindex="-1"></a><span class="co"># Call the function to plot the data</span></span>
<span id="cb12-44"><a href="#cb12-44" aria-hidden="true" tabindex="-1"></a>plot_performance_data(mean_performance_data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<p><img src="main_copy_files/figure-html/cell-11-output-1.png" class="img-fluid"></p>
</div>
</div>
</section>
<section id="actual-modelling" class="level2" data-number="1.6">
<h2 data-number="1.6" class="anchored" data-anchor-id="actual-modelling"><span class="header-section-number">1.6</span> Actual Modelling</h2>
<p>Based on the prelimary results a local model with a lookback of 30 time steps (30 * 8 days = 240 days) was chosen.</p>
<p>The modelling setup was the same as before, except that now the model was fitted for all locations and the number of hyperparameters was reduced. In the prelimnary results the hyperparameters of using 3 lstm layers, and relu as an activation function never were selected as the best hyperparameters. Therefore they were no longer considered.</p>
<p>Details: <a href="quarto_book/05_modelling.html">5 Prelimnary Modelling</a></p>
<hr>
<p><strong>Calculate mean RMSE and MAE</strong></p>
<p>The RMSE and MAE show the model achieved a good fit with a mean RMSE of 0.02 and a mean MAE of 0.014.</p>
<div class="cell" data-execution_count="39">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Reading the results and evaluation from the file</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> <span class="bu">open</span>(<span class="st">"results/modelling/final/results_full_local_auto_l30.json"</span>, <span class="st">'r'</span>) <span class="im">as</span> <span class="bu">file</span>:</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>    results_dict <span class="op">=</span> json.load(<span class="bu">file</span>)</span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>rmse_values <span class="op">=</span> {loc: data[<span class="st">'evaluation'</span>][<span class="st">'rmse'</span>] <span class="cf">for</span> loc, data <span class="kw">in</span> results_dict.items()}</span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>mae_values <span class="op">=</span> {loc: data[<span class="st">'evaluation'</span>][<span class="st">'mae'</span>] <span class="cf">for</span> loc, data <span class="kw">in</span> results_dict.items()}</span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a>mean_rmse <span class="op">=</span> np.mean(<span class="bu">list</span>(rmse_values.values()))</span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a>mean_mae <span class="op">=</span> np.mean(<span class="bu">list</span>(mae_values.values()))</span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Mean RMSE: </span><span class="sc">{</span>mean_rmse<span class="sc">:.3f}</span><span class="ss">"</span>)</span>
<span id="cb13-12"><a href="#cb13-12" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Mean MAE: </span><span class="sc">{</span>mean_mae<span class="sc">:.3f}</span><span class="ss">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Mean RMSE: 0.020
Mean MAE: 0.014</code></pre>
</div>
</div>
<hr>
<p><strong>Plotting timerseries for the best and worst performing models</strong></p>
<p>In the plot below showing the two best and worst performing models, we can also that the forecasted values match well with the true values. Even so for the two worst performing models. We can however observe that steep increases or decreases in SIF were in many cases not well predicted.</p>
<div class="cell" data-execution_count="40">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> plot_forecasts_from_dict(results_dict):</span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a><span class="co">    This function takes a dictionary containing model results and creates plots for the two locations</span></span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a><span class="co">    with the highest and two locations with the lowest RMSE values.</span></span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a><span class="co">    Args:</span></span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a><span class="co">    results_dict (dict): Dictionary containing model results with true and predicted values.</span></span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true" tabindex="-1"></a><span class="co">    Returns:</span></span>
<span id="cb15-12"><a href="#cb15-12" aria-hidden="true" tabindex="-1"></a><span class="co">    None</span></span>
<span id="cb15-13"><a href="#cb15-13" aria-hidden="true" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb15-14"><a href="#cb15-14" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Extract RMSEs and corresponding locations</span></span>
<span id="cb15-15"><a href="#cb15-15" aria-hidden="true" tabindex="-1"></a>    rmse_values <span class="op">=</span> {loc: data[<span class="st">'evaluation'</span>][<span class="st">'rmse'</span>] <span class="cf">for</span> loc, data <span class="kw">in</span> results_dict.items()}</span>
<span id="cb15-16"><a href="#cb15-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-17"><a href="#cb15-17" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Sort locations by RMSE</span></span>
<span id="cb15-18"><a href="#cb15-18" aria-hidden="true" tabindex="-1"></a>    sorted_locations <span class="op">=</span> <span class="bu">sorted</span>(rmse_values, key<span class="op">=</span>rmse_values.get)</span>
<span id="cb15-19"><a href="#cb15-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-20"><a href="#cb15-20" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Find two locations with highest and two with lowest RMSE</span></span>
<span id="cb15-21"><a href="#cb15-21" aria-hidden="true" tabindex="-1"></a>    lowest_rmse_locations <span class="op">=</span> sorted_locations[:<span class="dv">2</span>]</span>
<span id="cb15-22"><a href="#cb15-22" aria-hidden="true" tabindex="-1"></a>    highest_rmse_locations <span class="op">=</span> sorted_locations[<span class="op">-</span><span class="dv">2</span>:]</span>
<span id="cb15-23"><a href="#cb15-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-24"><a href="#cb15-24" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Function to plot true vs predicted values</span></span>
<span id="cb15-25"><a href="#cb15-25" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> plot_forecast(true_values, predicted_values, title, ax):</span>
<span id="cb15-26"><a href="#cb15-26" aria-hidden="true" tabindex="-1"></a>        line1, <span class="op">=</span> ax.plot(true_values, label<span class="op">=</span><span class="st">'True Values'</span>, color<span class="op">=</span><span class="st">'blue'</span>,alpha<span class="op">=</span><span class="fl">0.8</span>, linewidth<span class="op">=</span><span class="dv">2</span>)</span>
<span id="cb15-27"><a href="#cb15-27" aria-hidden="true" tabindex="-1"></a>        line2, <span class="op">=</span> ax.plot(predicted_values, label<span class="op">=</span><span class="st">'Predicted Values'</span>, color<span class="op">=</span><span class="st">'red'</span>, alpha<span class="op">=</span><span class="dv">1</span>, linestyle<span class="op">=</span><span class="st">'--'</span>, linewidth<span class="op">=</span><span class="dv">2</span>)</span>
<span id="cb15-28"><a href="#cb15-28" aria-hidden="true" tabindex="-1"></a>        ax.set_title(title, fontsize<span class="op">=</span><span class="dv">14</span>, y <span class="op">=</span> <span class="fl">1.05</span>)</span>
<span id="cb15-29"><a href="#cb15-29" aria-hidden="true" tabindex="-1"></a>        ax.set_xlabel(<span class="st">'Time'</span>, fontsize<span class="op">=</span><span class="dv">12</span>)</span>
<span id="cb15-30"><a href="#cb15-30" aria-hidden="true" tabindex="-1"></a>        ax.set_ylabel(<span class="st">'SIF'</span>, fontsize<span class="op">=</span><span class="dv">12</span>)</span>
<span id="cb15-31"><a href="#cb15-31" aria-hidden="true" tabindex="-1"></a>        ax.grid(<span class="va">True</span>)</span>
<span id="cb15-32"><a href="#cb15-32" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> line1, line2</span>
<span id="cb15-33"><a href="#cb15-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-34"><a href="#cb15-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-35"><a href="#cb15-35" aria-hidden="true" tabindex="-1"></a>    fig, axs <span class="op">=</span> plt.subplots(<span class="dv">2</span>, <span class="dv">2</span>, figsize<span class="op">=</span>(<span class="dv">14</span>, <span class="dv">12</span>))</span>
<span id="cb15-36"><a href="#cb15-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-37"><a href="#cb15-37" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Plot for locations with lowest RMSE</span></span>
<span id="cb15-38"><a href="#cb15-38" aria-hidden="true" tabindex="-1"></a>    lines <span class="op">=</span> []</span>
<span id="cb15-39"><a href="#cb15-39" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> i, loc <span class="kw">in</span> <span class="bu">enumerate</span>(lowest_rmse_locations):</span>
<span id="cb15-40"><a href="#cb15-40" aria-hidden="true" tabindex="-1"></a>        rmse <span class="op">=</span> np.<span class="bu">round</span>(results_dict[loc][<span class="st">'evaluation'</span>][<span class="st">'rmse'</span>],<span class="dv">3</span>)</span>
<span id="cb15-41"><a href="#cb15-41" aria-hidden="true" tabindex="-1"></a>        true_values <span class="op">=</span> results_dict[loc][<span class="st">'results'</span>][<span class="st">'true_values'</span>]</span>
<span id="cb15-42"><a href="#cb15-42" aria-hidden="true" tabindex="-1"></a>        predicted_values <span class="op">=</span> results_dict[loc][<span class="st">'results'</span>][<span class="st">'predicted_values'</span>]</span>
<span id="cb15-43"><a href="#cb15-43" aria-hidden="true" tabindex="-1"></a>        line1, line2 <span class="op">=</span> plot_forecast(</span>
<span id="cb15-44"><a href="#cb15-44" aria-hidden="true" tabindex="-1"></a>            [val[<span class="dv">0</span>] <span class="cf">for</span> val <span class="kw">in</span> true_values],</span>
<span id="cb15-45"><a href="#cb15-45" aria-hidden="true" tabindex="-1"></a>            [val[<span class="dv">0</span>] <span class="cf">for</span> val <span class="kw">in</span> predicted_values],</span>
<span id="cb15-46"><a href="#cb15-46" aria-hidden="true" tabindex="-1"></a>            <span class="ss">f'Lowest (best) RMSE prediction (RMSE: </span><span class="sc">{</span>rmse<span class="sc">}</span><span class="ss">)'</span><span class="cf">if</span> i <span class="op">==</span> <span class="dv">0</span> <span class="cf">else</span> <span class="ss">f'2nd Lowest (best) RMSE prediction (RMSE: </span><span class="sc">{</span>rmse<span class="sc">}</span><span class="ss">)'</span>,</span>
<span id="cb15-47"><a href="#cb15-47" aria-hidden="true" tabindex="-1"></a>            ax<span class="op">=</span>axs[<span class="dv">0</span>, i]</span>
<span id="cb15-48"><a href="#cb15-48" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb15-49"><a href="#cb15-49" aria-hidden="true" tabindex="-1"></a>        lines.append((line1, line2))</span>
<span id="cb15-50"><a href="#cb15-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-51"><a href="#cb15-51" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Plot for locations with highest RMSE</span></span>
<span id="cb15-52"><a href="#cb15-52" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> i, loc <span class="kw">in</span> <span class="bu">enumerate</span>(highest_rmse_locations):</span>
<span id="cb15-53"><a href="#cb15-53" aria-hidden="true" tabindex="-1"></a>        rmse <span class="op">=</span> np.<span class="bu">round</span>(results_dict[loc][<span class="st">'evaluation'</span>][<span class="st">'rmse'</span>],<span class="dv">3</span>)</span>
<span id="cb15-54"><a href="#cb15-54" aria-hidden="true" tabindex="-1"></a>        true_values <span class="op">=</span> results_dict[loc][<span class="st">'results'</span>][<span class="st">'true_values'</span>]</span>
<span id="cb15-55"><a href="#cb15-55" aria-hidden="true" tabindex="-1"></a>        predicted_values <span class="op">=</span> results_dict[loc][<span class="st">'results'</span>][<span class="st">'predicted_values'</span>]</span>
<span id="cb15-56"><a href="#cb15-56" aria-hidden="true" tabindex="-1"></a>        line1, line2 <span class="op">=</span> plot_forecast(</span>
<span id="cb15-57"><a href="#cb15-57" aria-hidden="true" tabindex="-1"></a>            [val[<span class="dv">0</span>] <span class="cf">for</span> val <span class="kw">in</span> true_values],</span>
<span id="cb15-58"><a href="#cb15-58" aria-hidden="true" tabindex="-1"></a>            [val[<span class="dv">0</span>] <span class="cf">for</span> val <span class="kw">in</span> predicted_values],</span>
<span id="cb15-59"><a href="#cb15-59" aria-hidden="true" tabindex="-1"></a>            <span class="ss">f'Highest (worst) RMSE prediction (RMSE: </span><span class="sc">{</span>rmse<span class="sc">}</span><span class="ss">)'</span> <span class="cf">if</span> i <span class="op">==</span> <span class="dv">0</span> <span class="cf">else</span> <span class="ss">f'2nd Highest (worst) RMSE prediction(RMSE: </span><span class="sc">{</span>rmse<span class="sc">}</span><span class="ss">)'</span>,</span>
<span id="cb15-60"><a href="#cb15-60" aria-hidden="true" tabindex="-1"></a>            ax<span class="op">=</span>axs[<span class="dv">1</span>, i]</span>
<span id="cb15-61"><a href="#cb15-61" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb15-62"><a href="#cb15-62" aria-hidden="true" tabindex="-1"></a>        lines.append((line1, line2))</span>
<span id="cb15-63"><a href="#cb15-63" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-64"><a href="#cb15-64" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Add a main title</span></span>
<span id="cb15-65"><a href="#cb15-65" aria-hidden="true" tabindex="-1"></a>    fig.suptitle(<span class="st">'Forecasted vs True Values'</span>, fontsize<span class="op">=</span><span class="dv">16</span>, y<span class="op">=</span><span class="fl">0.95</span>)</span>
<span id="cb15-66"><a href="#cb15-66" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-67"><a href="#cb15-67" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-68"><a href="#cb15-68" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-69"><a href="#cb15-69" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Add a single shared legend</span></span>
<span id="cb15-70"><a href="#cb15-70" aria-hidden="true" tabindex="-1"></a>    <span class="co">#fig.legend([lines[0][0], lines[0][1]], ['True Values', 'Predicted Values'], loc='lower center', fontsize=12)</span></span>
<span id="cb15-71"><a href="#cb15-71" aria-hidden="true" tabindex="-1"></a>    fig.legend([lines[<span class="dv">0</span>][<span class="dv">0</span>], lines[<span class="dv">0</span>][<span class="dv">1</span>]], [<span class="st">'True Values'</span>, <span class="st">'Predicted Values'</span>], loc<span class="op">=</span><span class="st">'lower center'</span>, bbox_to_anchor<span class="op">=</span>(<span class="fl">0.5</span>, <span class="fl">0.05</span>), ncol<span class="op">=</span><span class="dv">2</span>,</span>
<span id="cb15-72"><a href="#cb15-72" aria-hidden="true" tabindex="-1"></a>               fontsize <span class="op">=</span> <span class="dv">14</span>)</span>
<span id="cb15-73"><a href="#cb15-73" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-74"><a href="#cb15-74" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Adjust layout and show the plot</span></span>
<span id="cb15-75"><a href="#cb15-75" aria-hidden="true" tabindex="-1"></a>    plt.tight_layout(rect<span class="op">=</span>[<span class="dv">0</span>, <span class="fl">0.1</span>, <span class="dv">1</span>, <span class="fl">0.93</span>])</span>
<span id="cb15-76"><a href="#cb15-76" aria-hidden="true" tabindex="-1"></a>    plt.show()</span>
<span id="cb15-77"><a href="#cb15-77" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-78"><a href="#cb15-78" aria-hidden="true" tabindex="-1"></a>    plt.save(<span class="st">'results/figures/forecasted_vs_true_values.png'</span>)</span>
<span id="cb15-79"><a href="#cb15-79" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-80"><a href="#cb15-80" aria-hidden="true" tabindex="-1"></a><span class="co"># Call the function with the example dictionary</span></span>
<span id="cb15-81"><a href="#cb15-81" aria-hidden="true" tabindex="-1"></a>plot_forecasts_from_dict(results_dict)</span>
<span id="cb15-82"><a href="#cb15-82" aria-hidden="true" tabindex="-1"></a></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<p><img src="main_copy_files/figure-html/cell-13-output-1.png" class="img-fluid"></p>
</div>
</div>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./quarto_book/intro.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text">Introduction</span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./quarto_book/01_load_aux_data.html" class="pagination-link">
        <span class="nav-page-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Loading auxillary data</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->



</body></html>